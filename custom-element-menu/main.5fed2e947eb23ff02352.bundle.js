/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonpdemo=window.dojoWebpackJsonpdemo||[]).push([["main"],{17:function(e,t,r){"use strict";r.r(t);var n=r(0);r(1);let s,i,o,d,c,a,l,u,h;s=Object.assign,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,c=Object.is,a=Object.keys,l=Object.getOwnPropertyDescriptors,u=Object.entries,h=Object.values;let p=n.default.Map;var f=p;var g=n.default.WeakMap,y=r(2);function m(){return y.default.resolve(!1)}function _(){throw new Error("Call made to destroyed method")}class b{constructor(){this.handles=[]}own(e){const{handles:t}=this;return t.push(e),{destroy(){t.splice(t.indexOf(e)),e.destroy()}}}destroy(){return new y.default(e=>{this.handles.forEach(e=>{e&&e.destroy&&e.destroy()}),this.destroy=m,this.own=_,e(!0)})}}const w=new f;class v extends b{constructor(){super(...arguments),this.listenersMap=new f}emit(e){this.listenersMap.forEach((t,r)=>{(function(e,t){if("string"==typeof t&&"string"==typeof e&&-1!==e.indexOf("*")){let r;return w.has(e)?r=w.get(e):(r=new RegExp(`^${e.replace(/\*/g,".*")}$`),w.set(e,r)),r.test(t)}return e===t})(r,e.type)&&[...t].forEach(t=>{t.call(this,e)})})}on(e,t){if(Array.isArray(t)){const r=t.map(t=>this._addListener(e,t));return{destroy(){r.forEach(e=>e.destroy())}}}return this._addListener(e,t)}_addListener(e,t){const r=this.listenersMap.get(e)||[];return r.push(t),this.listenersMap.set(e,r),{destroy:()=>{const r=this.listenersMap.get(e)||[];r.splice(r.indexOf(t),1)}}}}const O="__widget_base_type";function j(e){return Boolean(e&&e._type===O)}function x(e){return Boolean(e&&e.isWidget)}function N(e){return!("function"!=typeof e||!e.isFactory)}function P(e){return j(e)||x(e)}class I extends v{emitLoadedEvent(e,t){this.emit({type:e,action:"loaded",item:t})}define(e,t){if(void 0===this._widgetRegistry&&(this._widgetRegistry=new f),this._widgetRegistry.has(e))throw new Error(`widget has already been registered for '${e.toString()}'`);this._widgetRegistry.set(e,t),t instanceof y.default?t.then(t=>(this._widgetRegistry.set(e,t),this.emitLoadedEvent(e,t),t),e=>{throw e}):j(t)&&this.emitLoadedEvent(e,t)}defineInjector(e,t){if(void 0===this._injectorRegistry&&(this._injectorRegistry=new f),this._injectorRegistry.has(e))throw new Error(`injector has already been registered for '${e.toString()}'`);const r=new v,n={injector:t(()=>r.emit({type:"invalidate"})),invalidator:r};this._injectorRegistry.set(e,n),this.emitLoadedEvent(e,n)}get(e){if(!this._widgetRegistry||!this.has(e))return null;const t=this._widgetRegistry.get(e);if(P(t)||N(t))return t;if(t instanceof y.default)return null;const r=t();return this._widgetRegistry.set(e,r),r.then(t=>(function(e){return Boolean(e&&e.hasOwnProperty("__esModule")&&e.hasOwnProperty("default")&&(P(e.default)||N(e.default)))}(t)&&(t=t.default),this._widgetRegistry.set(e,t),this.emitLoadedEvent(e,t),t),e=>{throw e}),null}getInjector(e){return this._injectorRegistry&&this.hasInjector(e)?this._injectorRegistry.get(e):null}has(e){return Boolean(this._widgetRegistry&&this._widgetRegistry.has(e))}hasInjector(e){return Boolean(this._injectorRegistry&&this._injectorRegistry.has(e))}}function R(e){return"[object Object]"===Object.prototype.toString.call(e)||Array.isArray(e)}function k(e,t){return{changed:e!==t,value:t}}function C(e,t,r=0){let n=!1;const s=e&&R(e),i=t&&R(t);if(!s||!i)return{changed:!0,value:t};const o=Object.keys(e),d=Object.keys(t);return{changed:n=o.length!==d.length||d.some(n=>r>0?C(t[n],e[n],r-1).changed:t[n]!==e[n]),value:t}}function D(e,t){let r;return r="function"==typeof t?t._type===O?k(e,t):function(e,t){return{changed:!1,value:t}}(0,t):R(t)?C(e,t):k(e,t)}var M,A=class extends v{constructor(){super(),this._registry=new I,this._registryWidgetLabelMap=new p,this._registryInjectorLabelMap=new p,this.own(this._registry),this.own({destroy:()=>{this.baseRegistry&&(this._registryWidgetLabelMap.delete(this.baseRegistry),this._registryInjectorLabelMap.delete(this.baseRegistry),this.baseRegistry=void 0)}})}set base(e){this.baseRegistry&&(this._registryWidgetLabelMap.delete(this.baseRegistry),this._registryInjectorLabelMap.delete(this.baseRegistry)),this.baseRegistry=e}get base(){return this.baseRegistry}define(e,t){this._registry.define(e,t)}defineInjector(e,t){this._registry.defineInjector(e,t)}has(e){return this._registry.has(e)||Boolean(this.baseRegistry&&this.baseRegistry.has(e))}hasInjector(e){return this._registry.hasInjector(e)||Boolean(this.baseRegistry&&this.baseRegistry.hasInjector(e))}get(e,t=!1){return this._get(e,t,"get",this._registryWidgetLabelMap)}getInjector(e,t=!1){return this._get(e,t,"getInjector",this._registryInjectorLabelMap)}_get(e,t,r,n){const s=t?[this.baseRegistry,this._registry]:[this._registry,this.baseRegistry];for(let i=0;i<s.length;i++){const o=s[i];if(!o)continue;const d=o[r](e),c=n.get(o)||[];if(d)return d;if(-1===c.indexOf(e)){const s=o.on(e,n=>{"loaded"===n.action&&this[r](e,t)===n.item&&this.emit({type:"invalidate"})});this.own(s),n.set(o,[...c,e])}}return null}};!function(e){e.Projector="Projector",e.Widget="Widget"}(M||(M={}));var E=class extends v{constructor(){super(...arguments),this._nodeMap=new f}get(e){return this._nodeMap.get(e)}has(e){return this._nodeMap.has(e)}add(e,t){this._nodeMap.set(t,e),this.emit({type:`${t}`})}addRoot(){this.emit({type:M.Widget})}remove(e){this._nodeMap.delete(e)}addProjector(){this.emit({type:M.Projector})}clear(){this._nodeMap.clear()}};var B=n.default.Set,H=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};const T=[],L=["focus","blur","scrollIntoView","click"],S="http://www.w3.org/2000/svg",W="http://www.w3.org/1999/xlink",$="__WNODE_TYPE",K="__VNODE_TYPE",q="__DOMVNODE_TYPE";function F(e){return e&&3===e.nodeType}function U(e){return e&&z(e.node)}function V(e){return!!e&&G(e.node)}function Y(e){return V(e)&&"virtual"===e.node.tag}function J(e){return V(e)&&"body"===e.node.tag}function z(e){return Boolean(e&&!0!==e&&"string"!=typeof e&&e.type===$)}function G(e){return Boolean(e&&!0!==e&&"string"!=typeof e&&(e.type===K||e.type===q))}function Q(e){return Boolean(e&&!0!==e&&"string"!=typeof e&&e.type===q)}function Z(e,t,r){return N(e)?e(t,r):(z(e)&&(t=Object.assign({},e.properties,t),r=r||e.children,e=e.widgetConstructor),{children:r||[],widgetConstructor:e,properties:t,type:$})}function X(e,t={},r){let n,s=t;if(Array.isArray(t)&&(r=t,s={}),"function"==typeof s&&(n=s,s={}),G(e)){let{classes:t=[],styles:n={}}=s,i=H(s,["classes","styles"]),o=e.properties,{classes:d=[],styles:c={}}=o,a=H(o,["classes","styles"]);d=Array.isArray(d)?d:[d],t=Array.isArray(t)?t:[t],n=Object.assign({},c,n),s=Object.assign({},a,i,{classes:[...d,...t],styles:n}),r=r||e.children,e=e.tag}return{tag:e,deferredPropertiesCallback:n,children:r,properties:s,type:K}}const ee="__registry_item";class te{constructor(){this.properties={}}}function re(e,t){const{node:{diffType:r,properties:n,attributes:s}}=t;if(!r||"vdom"===r)return{properties:t.deferredProperties?Object.assign({},t.deferredProperties,t.node.properties):t.node.properties,attributes:t.node.attributes,events:t.node.events};if("none"===r)return{properties:{},attributes:t.node.attributes?{}:void 0,events:t.node.events};let i={properties:{}};return s?(i.attributes={},i.events=t.node.events,Object.keys(n).forEach(t=>{i.properties[t]=e[t]}),Object.keys(s).forEach(t=>{i.attributes[t]=e.getAttribute(t)}),i):(i.properties=Object.keys(n).reduce((t,r)=>(t[r]=e.getAttribute(r)||e[r],t),{}),i)}function ne(e,t){if(V(e)&&V(t))return(!Q(e.node)||!Q(t.node)||e.node.domNode===t.node.domNode)&&(e.node.tag===t.node.tag&&e.node.properties.key===t.node.properties.key);if(U(e)&&U(t)){const r=e.registryItem||e.node.widgetConstructor,n=t.registryItem||t.node.widgetConstructor;return(void 0!==e.instance||"string"!=typeof n)&&(r===n&&e.node.properties.key===t.node.properties.key)}return!1}function se(e,t,r){for(let n=r;n<e.length;n++)if(ne(e[n],t))return n;return-1}function ie(e=[]){let t="";if(Array.isArray(e)){for(let r=0;r<e.length;r++){let n=e[r];n&&!0!==n&&(t=t?`${t} ${n}`:n)}return t}return e&&!0!==e&&(t=e),t}function oe(e,t,r,n){n===S&&"href"===t&&r?e.setAttributeNS(W,t,r):"role"===t&&""===r||void 0===r?e.removeAttribute(t):e.setAttribute(t,r)}function de(e){return Array.prototype.slice.call(e)}function ce(e,t){const r=(r,n)=>{if(r){const s=Z(e,r,n);return e.isWidget=!0,e.middlewares=t,s}return{middlewares:t,callback:e}};return r.isFactory=!0,r}te.type=ee;const ae=function(e={}){function t(t){return ce(t,e)}return t.properties=function(){return function(t){return ce(t,e)}},t}();const le=new g,ue=new f,he=new B;let pe=0,fe=0;function ge(e,t,r){const n=ue.get(e);if(n){n.nodeMap=n.nodeMap||new f,n.nodeMap.get(t)||n.nodeMap.set(t,r),he.has(`${e}-${t}`)&&(n.invalidator(),he.delete(`${e}-${t}`))}}function ye(e){e.forEach(e=>e()),e.clear()}ae(({id:e})=>{const[t]=e.split("-");return()=>{const e=ue.get(t);if(e)return e.invalidator()}}),ae(({id:e})=>({get(t){const[r]=e.split("-"),n=ue.get(r);if(n){n.nodeMap=n.nodeMap||new f;const e=n.nodeMap.get(t);if(e)return e;he.add(`${r}-${t}`)}return null}})),ae(({id:e})=>(t,r)=>{const[n]=e.split("-"),s=ue.get(n);if(s){s.customDiffMap=s.customDiffMap||new f,s.customDiffProperties=s.customDiffProperties||new B;const n=s.customDiffMap.get(e)||new f;n.has(t)||(n.set(t,r),s.customDiffProperties.add(t)),s.customDiffMap.set(e,n)}}),ae(({id:e})=>t=>{const[r]=e.split("-"),n=ue.get(r);n&&(n.destroyMap=n.destroyMap||new f,n.destroyMap.has(e)||n.destroyMap.set(e,t))}),ae(({id:e})=>{const[t]=e.split("-");return()=>{const e=ue.get(t);return e?(e.registryHandler||(e.registryHandler=new A,e.registryHandler.base=e.registry,e.registryHandler.on("invalidate",e.invalidator)),e.registryHandler=e.registryHandler||new A,e.registryHandler):null}}),ae(({id:e})=>{const[t]=e.split("-");let r=!1;return{pause(){const e=ue.get(t);!r&&e&&(e.deferRefs=e.deferRefs+1,r=!0)},resume(){const e=ue.get(t);r&&e&&(e.deferRefs=e.deferRefs-1,r=!1)}}});var me=function(e){let t,r,s={sync:!1,merge:!0,transition:void 0,domNode:n.default.document.body,registry:new I},i=[],o=[],d=[],c=[],a=new g,l=new f,u=new g,h=new f,p=new g,y=new g,m=[],_=[],b=[];function w(e,t,r,n){let s=t&&!r;"function"==typeof t&&(s=t()),!0===s&&_.push(()=>{n[e]()})}function v(e,t,r,n){if(n){const r=a.get(n);r&&e.removeEventListener(t,r)}let s=r;"input"===t&&(s=function(e){r.call(this,e),e.target["oninput-value"]=e.target.value}),e.addEventListener(t,s),a.set(r,s)}function O(e,t,r,n=!1){Object.keys(t).forEach(s=>{const i="on"===s.substr(0,2)||n,o=n?s:s.substr(2);if(i&&!r[s]){const r=a.get(t[s]);r&&e.removeEventListener(o,r)}})}function R(e,t,r){if(!P(e.node.widgetConstructor)){const n=y.get(e.node);let s;if(n&&(n.instance?t=n.instance:r=n.id),t){const e=le.get(t);e&&(s=e.registry)}else if(void 0!==r){const e=ue.get(r);e&&(e.registryHandler||(e.registryHandler=new A,e.registryHandler.base=e.registry,e.registryHandler.on("invalidate",e.invalidator)),s=e.registryHandler)}if(s){let t;if(function(e){return Boolean(e&&e.label)}(e.node.widgetConstructor)){const{label:r,registryItem:n}=e.node.widgetConstructor;s.has(r)||s.define(r,n),t=r}else t=e.node.widgetConstructor;let r=s.get(t);if(N(r)){const t=r(e.node.properties,e.node.children);x(t.widgetConstructor)&&(e.registryItem=t.widgetConstructor)}else e.registryItem=r}}}function k(e,t,r){const{requiresInsertBefore:n,hasPreviousSiblings:s,namespace:i,depth:o}=t,d=[],c=U(t),a=Y(t),p=(V(r)&&h.get(r.id)||[]).length>0,f=(n||!1!==s)&&(c||a)||p&&e.length>1;let g;U(t)&&e.length&&function(e,t){for(;e.length;){let r=e.pop();(z(r)||G(r))&&(y.has(r)||(y.set(r,t),r.children&&r.children.length&&(e=[...e,...r.children])))}}([...e],t);for(let r=0;r<e.length;r++){let n=e[r];if(!n||!0===n)continue;"string"==typeof n&&(n={tag:"",properties:{},children:void 0,text:`${n}`,type:K});const s=y.get(n),a={node:n,depth:o+1,order:r,parentId:t.id,requiresInsertBefore:f,hasParentWNode:c,namespace:i};if(G(n)&&(n.deferredPropertiesCallback&&(a.deferredProperties=n.deferredPropertiesCallback(!1)),n.properties.exitAnimation)){t.hasAnimations=!0;let e=l.get(t.parentId);for(;e&&!e.hasAnimations;)e.hasAnimations=!0,e=l.get(e.parentId)}s&&(a.owningId=s.id),z(n)&&R(a,t.instance,t.id),g&&u.set(g,a),d.push(a),g=a}return d}function C(e){const{deferredPropertiesCallback:t}=e.node;if(t){const r=e.node.properties;_.push(()=>{if(l.has(e.owningId)){const n=e.deferredProperties;e.deferredProperties=t(!0),H(e,{properties:Object.assign({},n,r)})}})}}function M(e){let t=null,r=e;for(;!t;){const e=u.get(r);if(e){let n=e.domNode;if((U(e)||Y(e))&&e.childDomWrapperId){const t=l.get(e.childDomWrapperId);t&&(n=t.domNode)}if(n&&n.parentNode){t=n;break}r=e}else if(!(r=r&&l.get(r.parentId))||V(r)&&!Y(r))break}return t}function E(e,t,r){const n=e.value,s=e["oninput-value"],i=e["select-value"];i&&n!==i?(e.value=i,e.value===i&&(e["select-value"]=void 0)):(s&&n===s||t!==r)&&(e.value=t,e["oninput-value"]=void 0)}function B(e,t={},r,n=!0){const s=r.deferredProperties?Object.assign({},r.deferredProperties,r.node.properties):r.node.properties,i=Object.keys(s),o=i.length;-1===i.indexOf("classes")&&t.classes&&e.removeAttribute("class"),n&&O(e,t,s);for(let d=0;d<o;d++){const o=i[d];let c=s[o];const a=t[o];if("classes"===o){const t=ie(a);let n=ie(c);if(t!==n)if(n){if(r.merged){const t=(e.getAttribute("class")||"").split(" ");for(let e=0;e<t.length;e++)-1===n.indexOf(t[e])&&(n=`${t[e]} ${n}`)}e.setAttribute("class",n)}else e.removeAttribute("class")}else if(-1!==L.indexOf(o))w(o,c,a,e);else if("styles"===o){const t=Object.keys(c),r=t.length;for(let n=0;n<r;n++){const r=t[n],s=c[r];s!==(a&&a[r])&&(e.style[r]=s||"")}}else if(c||"string"!=typeof a||(c=""),"value"===o)"SELECT"===e.tagName&&(e["select-value"]=c),E(e,c,a);else if("key"!==o&&c!==a){const t=typeof c;"function"===t&&0===o.lastIndexOf("on",0)&&n?v(e,o.substr(2),c,a):"string"===t&&"innerHTML"!==o&&n?oe(e,o,c,r.namespace):"scrollLeft"===o||"scrollTop"===o?e[o]!==c&&(e[o]=c):e[o]=c}}}function H(e,t){if(e.node.attributes&&e.node.events){!function(e,t,r,n){const s=Object.keys(r),i=s.length;for(let o=0;o<i;o++){const i=s[o],d=r[i];d!==t[i]&&oe(e,i,d,n)}}(e.domNode,t.attributes||{},e.node.attributes,e.namespace),B(e.domNode,t.properties,e,!1);const r=e.node.events||{};t.events&&O(e.domNode,t.events||{},e.node.events,!0),t.events=t.events||{},Object.keys(r).forEach(n=>{v(e.domNode,n,r[n],t.events[n])})}else B(e.domNode,t.properties,e)}function W(){const{sync:e}=s;e?Z():t||(t=n.default.requestAnimationFrame(()=>{Z()}))}function q(e){const t=l.get(e);if(t&&U(t))return t}function Z(){t=void 0;let e=[...i];const r=[];let n;for(i=[],e.sort((e,t)=>{let r=t.depth-e.depth;return 0===r&&(r=t.order-e.order),r}),d.length&&(o=[...d],d=[],te(),d.length&&(i=[...e],e=[]));n=e.pop();){let{id:e}=n;const t=q(e);if(!t||-1!==r.indexOf(e)||!l.has(t.parentId))continue;r.push(e);const s=u.get(t),i={node:{type:$,widgetConstructor:t.node.widgetConstructor,properties:t.properties||{},children:t.node.children||[]},instance:t.instance,id:t.id,properties:t.properties,depth:t.depth,order:t.order,owningId:t.owningId,parentId:t.parentId,registryItem:t.registryItem};s&&u.set(i,s);const d=we({current:t,next:i});d&&d.item&&(o.push(d.item),l.set(e,i),te())}ce(),ee(),he()}function ee(){if(0===d.length){let e;for(;e=b.pop();)e.parentNode&&e.parentNode.removeChild(e);s.merge=!1}}function te(){let e;for(;e=o.pop();)if(e.type)"attach"===e.type&&ve(e.id),e.instance&&c.push(e);else{const{current:t,next:r,meta:n}=e;_e(t||T,r||T,n)}}function ce(){let e;for(c.reverse();e=c.pop();)if("create"===e.type){const{parentDomNode:t,next:r,next:{domNode:n,merged:i,requiresInsertBefore:o,node:d}}=e;if(H(r,{properties:{}}),C(r),!i){let e;o?e=M(r):p&&(e=p.get(r)),t.insertBefore(n,e),Q(r.node)&&r.node.onAttach&&r.node.onAttach()}"OPTION"===n.tagName&&n.parentElement&&E(n.parentElement);const{enterAnimation:c,enterAnimationActive:a}=d.properties;s.transition&&c&&!0!==c&&s.transition.enter(n,c,a);const l=y.get(r.node);if(l&&null!=d.properties.key)if(l.instance){const e=le.get(l.instance);e&&e.nodeHandler.add(n,`${d.properties.key}`)}else ge(l.id,d.properties.key,n);e.next.inserted=!0}else if("update"===e.type){const{next:t,next:{domNode:r},current:n,current:{domNode:s}}=e;F(r)&&F(s)&&r!==s?s.parentNode&&s.parentNode.replaceChild(r,s):(H(t,re(r,n)),C(t))}else if("delete"===e.type){const{current:t}=e,{exitAnimation:r,exitAnimationActive:n}=t.node.properties;s.transition&&r&&!0!==r?s.transition.exit(t.domNode,r,n):t.domNode.parentNode.removeChild(t.domNode)}else if("attach"===e.type){const{instance:t,attached:r}=e,n=le.get(t);n&&(n.nodeHandler.addRoot(),r&&n.onAttach())}else if("detach"===e.type){if(e.current.instance){const t=le.get(e.current.instance);t&&t.onDetach()}e.current.instance=void 0}0===d.length&&(y=new g)}function he(){!function(){const{sync:e}=s,t=m;if(m=[],t.length){const r=()=>{let e;for(;e=t.shift();)e()};e?r():n.default.requestIdleCallback?n.default.requestIdleCallback(r):setTimeout(r)}}(),function(){const{sync:e}=s,t=_;if(_=[],t.length){const r=()=>{let e;for(;e=t.shift();)e()};e?r():n.default.requestAnimationFrame(r)}}()}function me(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(null==n.node.properties.key)return!1;t.push(n.node.properties.key)}return t}function _e(e,t,r={}){let{mergeNodes:n=[],oldIndex:i=0,newIndex:a=0}=r;const l=e.length,u=t.length,h=l>1||l>0&&l<u;let p=[],f=!1;if(0===i&&0===a&&l){const r=me(e);if(r){const n=me(t);if(n)for(let t=0;t<r.length;t++){if(-1!==n.indexOf(r[t])){p=[],f=!1;break}f=!0,p.push({current:e[t],next:void 0})}}}if(f||0===l&&!s.merge)for(let e=0;e<t.length;e++)p.push({current:void 0,next:t[e]});else{if(a<u){let r=i<l?e[i]:void 0;const o=t[a];o.hasPreviousSiblings=h,function(e,t){const{merge:r}=s;if(r&&t.length)if(V(e)){let{node:{tag:r}}=e;for(let n=0;n<t.length;n++){const s=t[n],i=s.tagName||"";if(r.toUpperCase()===i.toUpperCase()){const r=b.indexOf(s);-1!==r&&b.splice(r,1),t.splice(n,1),e.domNode=s;break}}}else e.mergeNodes=t}(o,n),r&&ne(r,o)?(i++,a++,V(r)&&V(o)&&(o.inserted=r.inserted),p.push({current:r,next:o})):r&&-1!==se(e,o,i+1)?-1===se(t,r,a+1)?(p.push({current:r,next:void 0}),i++):(p.push({current:r,next:void 0}),p.push({current:void 0,next:o}),i++,a++):(p.push({current:void 0,next:o}),a++)}if(a<u&&o.push({current:e,next:t,meta:{mergeNodes:n,oldIndex:i,newIndex:a}}),l>i&&a>=u)for(let t=i;t<l;t++)p.push({current:e[t],next:void 0})}for(let i=0;i<p.length;i++){const l=be(p[i]);if(!1===l){if(s.merge&&n.length){a<u&&o.pop(),o.push({next:t,current:e,meta:r}),d=o,o=[];break}continue}const{widget:h,item:f,dom:g}=l;h&&o.push(h),f&&o.push(f),g&&c.push(g)}}function be({current:e,next:t}){if(e!==t){if(!e&&t)return V(t)?function({next:e}){const t=function(e){let t,r=l.get(e.parentId);for(;!t&&r;)!t&&V(r)&&!Y(r)&&r.domNode&&(t=r.domNode),r=l.get(r.parentId);return t}(e),r=Y(e),i=J(e);let o,d=[];e.id=`${pe++}`,l.set(e.id,e),e.domNode?s.merge&&(e.merged=!0,F(e.domNode)?e.domNode.data!==e.node.text&&(b=[e.domNode,...b],e.domNode=n.default.document.createTextNode(e.node.text),e.merged=!1):(d=de(e.domNode.childNodes),b=[...b,...d])):(e.node.domNode?e.domNode=e.node.domNode:("svg"===e.node.tag&&(e.namespace=S),i?e.domNode=n.default.document.body:e.node.tag&&!r?e.namespace?e.domNode=n.default.document.createElementNS(e.namespace,e.node.tag):e.domNode=n.default.document.createElement(e.node.tag):null!=e.node.text&&(e.domNode=n.default.document.createTextNode(e.node.text))),p&&b.length&&t===b[0].parentNode&&p.set(e,b[0])),(e.domNode||r)&&e.node.children&&e.node.children.length&&(o=k(e.node.children,e,null),h.set(e.id,o));const c=r||i?void 0:{next:e,parentDomNode:t,type:"create"};return o?{item:{current:[],next:o,meta:{mergeNodes:d}},dom:c,widget:r?{type:"attach",id:e.id,attached:!1}:void 0}:{dom:c}}({next:t}):function({next:e}){let t,n,{node:{widgetConstructor:o}}=e,{registry:d}=s,c=e.registryItem||o;if(!P(c)){if(R(e),!e.registryItem)return!1;c=e.registryItem}e.properties=e.node.properties,e.id=e.id||`${pe++}`,l.set(e.id,e);const{id:a,depth:u,order:p}=e;if(j(c)){let r=new c;r.registry.base=d;const s=le.get(r);n=(()=>{s.dirty=!0,!s.rendering&&l.has(a)&&(i.push({id:a,depth:u,order:p}),W())}),s.invalidate=n,s.rendering=!0,r.__setProperties__(e.node.properties),r.__setChildren__(e.node.children),e.instance=r,t=r.__render__(),s.rendering=!1}else{let r=ue.get(a);if(r?n=r.invalidator:(n=(()=>{const e=ue.get(a);e&&(e.dirty=!0,!e.rendering&&l.has(a)&&(i.push({id:a,depth:u,order:p}),W()))}),r={dirty:!1,invalidator:n,properties:e.node.properties,children:e.node.children,deferRefs:0,rendering:!0,registry:s.registry},ue.set(e.id,r),r.middleware=c.middlewares?function e(t,r){const n=Object.keys(t),s={},i=`${r}-${fe++}`;for(let o=0;o<n.length;o++){const d=t[n[o]](),c={id:i,properties:()=>{const e=ue.get(r);return e?Object.assign({},e.properties):{}},children:()=>{const e=ue.get(r);return e?e.children:[]}};if(d.middlewares){const t=e(d.middlewares,r);c.middleware=t,s[n[o]]=d.callback(c)}else s[n[o]]=d.callback(c)}return s}(c.middlewares,a):{}),t=c({id:a,properties:()=>e.node.properties,children:()=>e.node.children,middleware:r.middleware}),r.rendering=!1,r.deferRefs>0)return!1}let f;return t&&(t=Array.isArray(t)?t:[t],f=k(t,e,null),h.set(a,f)),r||c.isWNodeWrapper||(r=n),{item:{next:f,meta:{mergeNodes:e.mergeNodes}},widget:{type:"attach",instance:e.instance,id:a,attached:!0}}}({next:t});if(e&&t){if(V(e)&&V(t))return function({current:e,next:t}){let r;t.domNode=e.domNode,t.namespace=e.namespace,t.id=e.id,t.childDomWrapperId=e.childDomWrapperId;let s=h.get(t.id);return null!=t.node.text&&t.node.text!==e.node.text?t.domNode=n.default.document.createTextNode(t.node.text):t.node.children&&(r=k(t.node.children,t,e),h.set(t.id,r)),u.delete(e),l.set(t.id,t),{item:{current:s,next:r,meta:{}},dom:{type:"update",next:t,current:e}}}({current:e,next:t});if(U(e)&&U(t))return we({current:e,next:t})}else if(e&&!t){if(V(e))return function({current:e}){const t=Y(e),r=J(e),n=h.get(e.id);if(h.delete(e.id),l.delete(e.id),u.delete(e),e.node.properties.key){const t=ue.get(e.owningId),r=q(e.owningId);if(t)t.nodeMap&&t.nodeMap.delete(e.node.properties.key);else if(r&&r.instance){const t=le.get(r.instance);t&&t.nodeHandler.remove(e.node.properties.key)}}return e.hasAnimations||t||r?{item:{current:n,meta:{}},dom:t||r?void 0:{type:"delete",current:e}}:(n&&_.push(()=>{let e,t=n||[],r=[];for(;e=t.pop();){if(U(e))if((e=q(e.id)||e).instance){const t=le.get(e.instance);t&&t.onDetach(),e.instance=void 0}else{const t=ue.get(e.id);t&&(t.registryHandler&&t.registryHandler.destroy(),t.destroyMap&&ye(t.destroyMap),ue.delete(e.id))}let n=h.get(e.id);n&&t.push(...n),J(e)?r.push(e.id):-1!==r.indexOf(e.parentId)&&(U(e)||Y(e)?r.push(e.id):e.domNode&&e.domNode.parentNode&&e.domNode.parentNode.removeChild(e.domNode)),h.delete(e.id),l.delete(e.id)}}),{dom:{type:"delete",current:e}})}({current:e});if(U(e))return function({current:e}){e=q(e.id)||e,l.delete(e.id);const t=ue.get(e.id);let r=h.get(e.id);h.delete(e.id),u.delete(e);let n={item:{current:r,meta:{}}};return t?(t.registryHandler&&t.registryHandler.destroy(),t.destroyMap&&ye(t.destroyMap),ue.delete(e.id)):n.widget={type:"detach",current:e,instance:e.instance},n}({current:e})}}return{}}function we({current:e,next:t}){e=q(e.id)||e;const{instance:r,domNode:n,hasAnimations:s}=e;let{node:{widgetConstructor:i}}=t;const o=t.registryItem||i;if(!P(o))return{};let d,c,a={},p=!1,g=h.get(e.id);if(t.hasAnimations=s,t.id=e.id,t.childDomWrapperId=e.childDomWrapperId,t.properties=t.node.properties,u.delete(e),n&&n.parentNode&&(t.domNode=n),j(o)){const e=le.get(r);t.instance=r,e.rendering=!0,r.__setProperties__(t.node.properties),r.__setChildren__(t.node.children),e.dirty&&(p=!0,h.delete(t.id),d=r.__render__()),e.rendering=!1}else{const r=ue.get(t.id);r&&(r.properties=t.properties,r.rendering=!0,function(e,t,r){e.customDiffMap=e.customDiffMap||new f,e.customDiffMap.size&&e.customDiffMap.forEach(e=>{e.forEach(e=>e(Object.assign({},t),Object.assign({},r)))})}(r,e.properties,t.properties),(e.node.children.length>0||t.node.children.length>0)&&(r.dirty=!0),r.dirty||function(e,t,r,n){const s=[...Object.keys(e),...Object.keys(t)];for(let i=0;i<s.length;i++)if(!(n.indexOf(s[i])>-1)){if(D(e[s[i]],t[s[i]]).changed){r();break}n.push(s[i])}}(e.properties,t.properties,()=>{r.dirty=!0},r.customDiffProperties?[...r.customDiffProperties.values()]:[]),r.dirty&&(h.delete(t.id),p=!0,r.dirty=!1,d=o({id:t.id,properties:()=>t.node.properties,children:()=>t.node.children,middleware:r.middleware}),r.deferRefs>0&&(d=null)),r.rendering=!1)}return l.set(t.id,t),a.widget={type:"attach",instance:r,id:t.id,attached:!1},d&&(c=k(d=Array.isArray(d)?d:[d],t,e),h.set(t.id,c)),p&&(a.item={current:g,next:c,meta:{}}),a}function ve(e){let t,r=l.get(e),n=[...h.get(e)||[]];for(;n.length&&!r.domNode;)if(t=n.shift()){if(t.domNode){r.childDomWrapperId=t.id;break}let e=h.get(t.id);e&&(n=[...e,...n])}}return{mount:function(t={}){s=Object.assign({},s,t);const{domNode:r}=s,n=function(e){const t=e(),r=z(t),n=()=>t;return n.isWNodeWrapper=r,ae(n)}(e)({}),i={id:`${pe++}`,node:n,order:0,depth:1,owningId:"-1",parentId:"-1",siblingId:"-1",properties:{}};l.set("-1",{id:"-1",depth:0,order:0,owningId:"",domNode:r,node:X("fake"),parentId:"-1"}),o.push({current:[],next:[i],meta:{mergeNodes:de(r.childNodes)}}),te(),ce(),ee(),p=void 0,he()},invalidate:function(){r&&r()}}};const _e=new g,be=new g,we=D.bind(null);const ve=["render",...Object.getOwnPropertyNames(Object.getPrototypeOf({}))],Oe=new f;class je{constructor(){this._initialProperties=!0,this._changedPropertyKeys=[],this._registry=new A,this._nodeHandler=new E,this._handles=[],this._children=[],this._decoratorCache=new f,this._properties={},this._boundRenderFunc=this.render.bind(this),this._boundInvalidate=this.invalidate.bind(this),this.own(this._registry),this.own(this._registry.on("invalidate",this._boundInvalidate)),le.set(this,{dirty:!0,onAttach:()=>{this.onAttach()},onDetach:()=>{this.onDetach(),this.destroy()},nodeHandler:this._nodeHandler,rendering:!1,inputProperties:{},registry:this.registry}),this.own({destroy:()=>{le.delete(this),this._nodeHandler.clear(),this._nodeHandler.destroy()}}),this._runAfterConstructors()}meta(e){void 0===this._metaMap&&(this._metaMap=new f);let t=this._metaMap.get(e);return t||(t=new e({invalidate:this._boundInvalidate,nodeHandler:this._nodeHandler,bind:this}),this.own(t),this._metaMap.set(e,t)),t}onAttach(){}onDetach(){}get properties(){return this._properties}get changedPropertyKeys(){return[...this._changedPropertyKeys]}__setProperties__(e){const t=le.get(this);t&&(t.inputProperties=e);const r=this._runBeforeProperties(e),n=this.getDecorator("registeredDiffProperty"),s=[],i=Object.keys(r);if(this._initialProperties&&function(e){let t=e.constructor.prototype,r=[];if(Oe.has(t))r=Oe.get(t);else{for(;t;){const e=Object.getOwnPropertyNames(t);if(t.constructor.hasOwnProperty("_type"))break;r=[...r,...e],t=Object.getPrototypeOf(t)}r=r.filter(t=>"function"==typeof e[t]&&-1===ve.indexOf(t)),Oe.set(t,r)}for(let t=0;t<r.length;t++){const n=r[t],s=e[n].bind(e);Object.defineProperty(e,n,{configurable:!0,get:()=>s})}}(this),!1===this._initialProperties||0!==n.length){const e=[...i,...Object.keys(this._properties)],t=[],o={};let d=!1;for(let i=0;i<e.length;i++){const c=e[i];if(-1!==t.indexOf(c))continue;t.push(c);const a=this._properties[c],l=r[c];if(-1!==n.indexOf(c)){d=!0;const e=this.getDecorator(`diffProperty:${c}`);for(let t=0;t<e.length;t++){const n=e[t](a,l);n.changed&&-1===s.indexOf(c)&&s.push(c),c in r&&(o[c]=n.value)}}else{const e=we(a,l);e.changed&&-1===s.indexOf(c)&&s.push(c),c in r&&(o[c]=e.value)}}if(d){const e=this.getDecorator("diffReaction"),t=[];e.forEach(({reaction:e,propertyName:r})=>{const n=-1!==s.indexOf(r),i=-1!==t.indexOf(e);n&&!i&&(e.call(this,this._properties,o),t.push(e))})}this._properties=o,this._changedPropertyKeys=s}else{this._initialProperties=!1;for(let e=0;e<i.length;e++){const t=i[e];"function"==typeof r[t]?r[t]=r[t]:s.push(t)}this._changedPropertyKeys=s,this._properties=Object.assign({},r)}this._changedPropertyKeys.length>0&&this.invalidate()}get children(){return this._children}__setChildren__(e){(this._children.length>0||e.length>0)&&(this._children=e,this.invalidate())}__render__(){const e=le.get(this);e&&(e.dirty=!1);const t=this._runBeforeRenders();return this._runAfterRenders(t())}invalidate(){const e=le.get(this);e&&e.invalidate&&e.invalidate()}render(){return X("div",{},this.children)}addDecorator(e,t){if(t=Array.isArray(t)?t:[t],this.hasOwnProperty("constructor")){let r=_e.get(this.constructor);r||(r=new f,_e.set(this.constructor,r));let n=r.get(e);n||(n=[],r.set(e,n)),n.push(...t)}else{const r=this.getDecorator(e);this._decoratorCache.set(e,[...r,...t])}}_buildDecoratorList(e){const t=[];let r=this.constructor;for(;r;){const n=_e.get(r);if(n){const r=n.get(e);r&&t.unshift(...r)}r=Object.getPrototypeOf(r)}const n=be.get(this.constructor)||new f;return n.set(e,t),be.set(this.constructor,n),t}getDecorator(e){let t=be.get(this.constructor),r=this._decoratorCache.get(e)||t&&t.get(e);return void 0!==r?r:(r=this._buildDecoratorList(e),r=[...r],this._decoratorCache.set(e,r),r)}get registry(){return this._registry}_runBeforeProperties(e){const t=this.getDecorator("beforeProperties");return t.length>0?t.reduce((e,t)=>Object.assign({},e,t.call(this,e)),Object.assign({},e)):e}_runBeforeRenders(){const e=this.getDecorator("beforeRender");return e.length>0?e.reduce((e,t)=>{const r=t.call(this,e,this._properties,this._children);return r||(console.warn("Render function not returned from beforeRender, using previous render"),e)},this._boundRenderFunc):this._boundRenderFunc}_runAfterRenders(e){const t=this.getDecorator("afterRender");return t.length>0&&(e=t.reduce((e,t)=>t.call(this,e),e)),void 0!==this._metaMap&&this._metaMap.forEach(e=>{(function(e){return Boolean(e.afterRender)})(e)&&e.afterRender()}),e}_runAfterConstructors(){const e=this.getDecorator("afterConstructor");e.length>0&&e.forEach(e=>e.call(this))}own(e){this._handles.push(e)}destroy(){for(;this._handles.length>0;){const e=this._handles.pop();e&&e.destroy()}}}je._type=O;function xe(e){return function(t,r,n){"function"==typeof t?e(t.prototype,void 0):e(t,r)}}function Ne(e){return xe((t,r)=>{t.addDecorator("beforeProperties",r?t[r]:e)})}const Pe=new g;function Ie({name:e,getProperties:t}){return xe((r,n)=>{Ne(function(r){const n=this.registry.getInjector(e);if(n){const{injector:e,invalidator:s}=n,i=Pe.get(this)||[];return 0===i.length&&Pe.set(this,i),-1===i.indexOf(n)&&(this.own(s.on("invalidate",()=>{this.invalidate()})),i.push(n)),t(e(),r)}})(r)})}function Re(e,t=D,r){return xe((n,s)=>{n.addDecorator(`diffProperty:${e}`,t.bind(null)),n.addDecorator("registeredDiffProperty",e),(r||s)&&n.addDecorator("diffReaction",{propertyName:e,reaction:s?n[s]:r})})}var ke=function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Ce=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};const De=" _key",Me="__theme_injector";function Ae(e){return xe(t=>{t.addDecorator("baseThemeClasses",e)})}function Ee(e){let t=class extends e{constructor(){super(...arguments),this._registeredBaseThemeKeys=[],this._recalculateClasses=!0,this._theme={}}theme(e){return this._recalculateClasses&&this._recalculateThemeClasses(),Array.isArray(e)?e.map(e=>this._getThemeClass(e)):this._getThemeClass(e)}onPropertiesChanged(){this._recalculateClasses=!0}_getThemeClass(e){if(null==e||!1===e||!0===e)return e;const t=this.properties.extraClasses||{},r=this._baseThemeClassesReverseLookup[e];let n=[];if(!r)return console.warn(`Class name: '${e}' not found in theme`),null;if(this._classes){const e=Object.keys(this._classes).reduce((e,t)=>{const n=Object.keys(this._classes[t]);for(let s=0;s<n.length;s++){const i=this._classes[t][n[s]];if(n[s]===r&&i){i.forEach(t=>{t&&!0!==t&&e.push(t)});break}}return e},[]);n.push(...e)}return t[r]&&n.push(t[r]),this._theme[r]?n.push(this._theme[r]):n.push(this._registeredBaseTheme[r]),n.join(" ")}_recalculateThemeClasses(){const{theme:e={},classes:t={}}=this.properties;if(!this._registeredBaseTheme){const e=this.getDecorator("baseThemeClasses");0===e.length&&console.warn("A base theme has not been provided to this widget. Please use the @theme decorator to add a theme."),this._registeredBaseTheme=e.reduce((e,t)=>{const r=De,n=t[r],s=Ce(t,["symbol"==typeof r?r:r+""]);return this._registeredBaseThemeKeys.push(n),Object.assign({},e,s)},{}),this._baseThemeClassesReverseLookup=function(e){return e.reduce((e,t)=>(Object.keys(t).forEach(r=>{e[t[r]]=r}),e),{})}(e)}this._theme=this._registeredBaseThemeKeys.reduce((t,r)=>Object.assign({},t,e[r]),{}),this._classes=Object.keys(t).reduce((e,r)=>(this._registeredBaseThemeKeys.indexOf(r)>-1&&(e=Object.assign({},e,{[r]:t[r]})),e),{}),this._recalculateClasses=!1}};return ke([Re("theme",C),Re("extraClasses",C),Re("classes",C)],t.prototype,"onPropertiesChanged",null),t=ke([Ie({name:Me,getProperties:(e,t)=>t.theme?{}:{theme:e.get()}})],t)}var Be=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};function He(e){const{tag:t}=e,r=Be(e,["tag"]);return t&&(r.tagName=t),function(e){e.__customElementDescriptor=Object.assign({},e.__customElementDescriptor,r)}}var Te=r(31);let Le=class extends(Ee(je)){_onSelected(e,t){this._selectedId=e,this.properties.onSelected(t),this.invalidate()}render(){const e=this.children.map((e,t)=>{if(e){const r={onSelected:e=>{this._onSelected(t,e)}};void 0!==this._selectedId&&(r.selected=t===this._selectedId),e.properties=Object.assign({},e.properties,r)}return e});return X("nav",{classes:this.theme(Te.root)},[X("ol",{classes:this.theme(Te.menuContainer)},e)])}};Le=function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([Ae(Te),He({tag:"demo-menu",events:["onSelected"]})],Le);var Se=r(33);let We=class extends(Ee(je)){_onClick(){this.properties.onSelected&&this.properties.onSelected(this.properties.data)}render(){const{selected:e}=this.properties;return X("li",{classes:this.theme(Se.root)},[X("span",{classes:this.theme([Se.item,e?Se.selected:null]),onclick:this._onClick},[this.properties.title])])}};We=function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}([He({tag:"demo-menu-item",events:["onSelected"],attributes:["title"],properties:["data","selected"]}),Ae(Se)],We);class $e extends je{_onSelected(e){console.log(e)}render(){return Z(Le,{onSelected:this._onSelected},[Z(We,{key:"a",title:"Menu Item A"}),Z(We,{key:"b",title:"Menu Item B",selected:!0}),Z(We,{key:"c",title:"Menu Item C"})])}}const Ke=document.getElementById("widget");me(()=>Z($e,{})).mount({domNode:Ke})},31:function(e,t,r){e.exports={" _key":"demo/menu",root:"menu-m__root__34HPG",menuContainer:"menu-m__menuContainer__1lZUl",home:"menu-m__home__3ExrL",logo:"menu-m__logo__2cdP4"}},33:function(e,t,r){e.exports={" _key":"demo/menuItem",root:"menuItem-m__root__3nC3w",item:"menuItem-m__item__2otQ-",selected:"menuItem-m__selected__3H86O"}}}]);
//# sourceMappingURL=main.5fed2e947eb23ff02352.bundle.js.map