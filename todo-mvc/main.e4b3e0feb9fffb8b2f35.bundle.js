/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonpdojo_todo_mvc=window.dojoWebpackJsonpdojo_todo_mvc||[]).push([["main"],{17:function(e,t,r){"use strict";r.r(t);var n=r(0);r(1);var s=n.default.WeakMap;var o=n.default.Set;let i,a,d,c,l,u,p,h,f;i=Object.assign,a=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,l=Object.is,u=Object.keys,p=Object.getOwnPropertyDescriptors,h=Object.entries,f=Object.values;let g=n.default.Map;var y=g,m=r(2);function _(){return m.default.resolve(!1)}function b(){throw new Error("Call made to destroyed method")}class v{constructor(){this.handles=[]}own(e){const{handles:t}=this;return t.push(e),{destroy(){t.splice(t.indexOf(e)),e.destroy()}}}destroy(){return new m.default(e=>{this.handles.forEach(e=>{e&&e.destroy&&e.destroy()}),this.destroy=_,this.own=b,e(!0)})}}const w=new y;class O extends v{constructor(){super(...arguments),this.listenersMap=new y}emit(e){this.listenersMap.forEach((t,r)=>{(function(e,t){if("string"==typeof t&&"string"==typeof e&&-1!==e.indexOf("*")){let r;return w.has(e)?r=w.get(e):(r=new RegExp(`^${e.replace(/\*/g,".*")}$`),w.set(e,r)),r.test(t)}return e===t})(r,e.type)&&[...t].forEach(t=>{t.call(this,e)})})}on(e,t){if(Array.isArray(t)){const r=t.map(t=>this._addListener(e,t));return{destroy(){r.forEach(e=>e.destroy())}}}return this._addListener(e,t)}_addListener(e,t){const r=this.listenersMap.get(e)||[];return r.push(t),this.listenersMap.set(e,r),{destroy:()=>{const r=this.listenersMap.get(e)||[];r.splice(r.indexOf(t),1)}}}}var A=O;const j="__widget_base_type";function x(e){return Boolean(e&&e._type===j)}function P(e){return Boolean(e&&e.isWidget)}function k(e){return!("function"!=typeof e||!e.isFactory)}function N(e){return x(e)||P(e)}class I extends O{emitLoadedEvent(e,t){this.emit({type:e,action:"loaded",item:t})}define(e,t){if(void 0===this._widgetRegistry&&(this._widgetRegistry=new y),this._widgetRegistry.has(e))throw new Error(`widget has already been registered for '${e.toString()}'`);this._widgetRegistry.set(e,t),t instanceof m.default?t.then(t=>(this._widgetRegistry.set(e,t),this.emitLoadedEvent(e,t),t),e=>{throw e}):x(t)&&this.emitLoadedEvent(e,t)}defineInjector(e,t){if(void 0===this._injectorRegistry&&(this._injectorRegistry=new y),this._injectorRegistry.has(e))throw new Error(`injector has already been registered for '${e.toString()}'`);const r=new O,n={injector:t(()=>r.emit({type:"invalidate"})),invalidator:r};this._injectorRegistry.set(e,n),this.emitLoadedEvent(e,n)}get(e){if(!this._widgetRegistry||!this.has(e))return null;const t=this._widgetRegistry.get(e);if(N(t)||k(t))return t;if(t instanceof m.default)return null;const r=t();return this._widgetRegistry.set(e,r),r.then(t=>(function(e){return Boolean(e&&e.hasOwnProperty("__esModule")&&e.hasOwnProperty("default")&&(N(e.default)||k(e.default)))}(t)&&(t=t.default),this._widgetRegistry.set(e,t),this.emitLoadedEvent(e,t),t),e=>{throw e}),null}getInjector(e){return this._injectorRegistry&&this.hasInjector(e)?this._injectorRegistry.get(e):null}has(e){return Boolean(this._widgetRegistry&&this._widgetRegistry.has(e))}hasInjector(e){return Boolean(this._injectorRegistry&&this._injectorRegistry.has(e))}}var E=I;function C(e){return"[object Object]"===Object.prototype.toString.call(e)||Array.isArray(e)}function R(e,t){return{changed:e!==t,value:t}}function M(e,t){let r;return r="function"==typeof t?t._type===j?R(e,t):function(e,t){return{changed:!1,value:t}}(0,t):C(t)?function e(t,r,n=0){let s=!1;const o=t&&C(t),i=r&&C(r);if(!o||!i)return{changed:!0,value:r};const a=Object.keys(t),d=Object.keys(r);return{changed:s=a.length!==d.length||d.some(s=>n>0?e(r[s],t[s],n-1).changed:r[s]!==t[s]),value:r}}(e,t):R(e,t)}var $=class extends O{constructor(){super(),this._registry=new I,this._registryWidgetLabelMap=new g,this._registryInjectorLabelMap=new g,this.own(this._registry),this.own({destroy:()=>{this.baseRegistry&&(this._registryWidgetLabelMap.delete(this.baseRegistry),this._registryInjectorLabelMap.delete(this.baseRegistry),this.baseRegistry=void 0)}})}set base(e){this.baseRegistry&&(this._registryWidgetLabelMap.delete(this.baseRegistry),this._registryInjectorLabelMap.delete(this.baseRegistry)),this.baseRegistry=e}get base(){return this.baseRegistry}define(e,t){this._registry.define(e,t)}defineInjector(e,t){this._registry.defineInjector(e,t)}has(e){return this._registry.has(e)||Boolean(this.baseRegistry&&this.baseRegistry.has(e))}hasInjector(e){return this._registry.hasInjector(e)||Boolean(this.baseRegistry&&this.baseRegistry.hasInjector(e))}get(e,t=!1){return this._get(e,t,"get",this._registryWidgetLabelMap)}getInjector(e,t=!1){return this._get(e,t,"getInjector",this._registryInjectorLabelMap)}_get(e,t,r,n){const s=t?[this.baseRegistry,this._registry]:[this._registry,this.baseRegistry];for(let o=0;o<s.length;o++){const i=s[o];if(!i)continue;const a=i[r](e),d=n.get(i)||[];if(a)return a;if(-1===d.indexOf(e)){const s=i.on(e,n=>{"loaded"===n.action&&this[r](e,t)===n.item&&this.emit({type:"invalidate"})});this.own(s),n.set(i,[...d,e])}}return null}},L=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};const D=[],S=["focus","blur","scrollIntoView","click"],T="http://www.w3.org/2000/svg",W="http://www.w3.org/1999/xlink",H="__WNODE_TYPE",q="__VNODE_TYPE",B="__DOMVNODE_TYPE";function Q(e){return e&&3===e.nodeType}function V(e){return e&&J(e.node)}function K(e){return!!e&&U(e.node)}function F(e){return K(e)&&"virtual"===e.node.tag}function z(e){return K(e)&&"body"===e.node.tag}function J(e){return Boolean(e&&!0!==e&&"string"!=typeof e&&e.type===H)}function U(e){return Boolean(e&&!0!==e&&"string"!=typeof e&&(e.type===q||e.type===B))}function Y(e){return Boolean(e&&!0!==e&&"string"!=typeof e&&e.type===B)}function X(e,t,r){return k(e)?e(t,r):(J(e)&&(t=Object.assign({},e.properties,t),r=r||e.children,e=e.widgetConstructor),{children:r||[],widgetConstructor:e,properties:t,type:H})}function G(e,t={},r){let n,s=t;if(Array.isArray(t)&&(r=t,s={}),"function"==typeof s&&(n=s,s={}),U(e)){let{classes:t=[],styles:n={}}=s,o=L(s,["classes","styles"]),i=e.properties,{classes:a=[],styles:d={}}=i,c=L(i,["classes","styles"]);a=Array.isArray(a)?a:[a],t=Array.isArray(t)?t:[t],n=Object.assign({},d,n),s=Object.assign({},c,o,{classes:[...a,...t],styles:n}),r=r||e.children,e=e.tag}return{tag:e,deferredPropertiesCallback:n,children:r,properties:s,type:q}}const Z="__registry_item";class ee{constructor(){this.properties={}}}function te(e,t){return Array.isArray(t)?t.reduce(te,e):[...e,t]}function re(e,t={},...r){if(r=r.reduce(te,[]),t=null===t?{}:t,"string"==typeof e)return G(e,t,r);if("registry"===e.type&&t.__autoRegistryItem){const e=t.__autoRegistryItem;return delete t.__autoRegistryItem,X(e,t,r)}if(e.type===Z){return X((new e).name,t,r)}return X(e,t,r)}function ne(e,t){const{node:{diffType:r,properties:n,attributes:s}}=t;if(!r||"vdom"===r)return{properties:t.deferredProperties?Object.assign({},t.deferredProperties,t.node.properties):t.node.properties,attributes:t.node.attributes,events:t.node.events};if("none"===r)return{properties:{},attributes:t.node.attributes?{}:void 0,events:t.node.events};let o={properties:{}};return s?(o.attributes={},o.events=t.node.events,Object.keys(n).forEach(t=>{o.properties[t]=e[t]}),Object.keys(s).forEach(t=>{o.attributes[t]=e.getAttribute(t)}),o):(o.properties=Object.keys(n).reduce((t,r)=>(t[r]=e.getAttribute(r)||e[r],t),{}),o)}function se(e,t){if(K(e)&&K(t))return(!Y(e.node)||!Y(t.node)||e.node.domNode===t.node.domNode)&&(e.node.tag===t.node.tag&&e.node.properties.key===t.node.properties.key);if(V(e)&&V(t)){const r=e.registryItem||e.node.widgetConstructor,n=t.registryItem||t.node.widgetConstructor;return(void 0!==e.instance||"string"!=typeof n)&&(r===n&&e.node.properties.key===t.node.properties.key)}return!1}function oe(e,t,r){for(let n=r;n<e.length;n++)if(se(e[n],t))return n;return-1}function ie(e=[]){let t="";if(Array.isArray(e)){for(let r=0;r<e.length;r++){let n=e[r];n&&!0!==n&&(t=t?`${t} ${n}`:n)}return t}return e&&!0!==e&&(t=e),t}function ae(e,t,r,n){n===T&&"href"===t&&r?e.setAttributeNS(W,t,r):"role"===t&&""===r||void 0===r?e.removeAttribute(t):e.setAttribute(t,r)}function de(e){return Array.prototype.slice.call(e)}function ce(e,t){const r=(r,n)=>{if(r){const s=X(e,r,n);return e.isWidget=!0,e.middlewares=t,s}return{middlewares:t,callback:e}};return r.isFactory=!0,r}function le(e={}){function t(t){return ce(t,e)}return t.properties=function(){return function(t){return ce(t,e)}},t}ee.type=Z;const ue=le();const pe=new s,he=new y,fe=new o;let ge=0,ye=0;function me(e,t,r){const n=he.get(e);if(n){n.nodeMap=n.nodeMap||new y,n.nodeMap.get(t)||n.nodeMap.set(t,r),fe.has(`${e}-${t}`)&&(n.invalidator(),fe.delete(`${e}-${t}`))}}function _e(e){e.forEach(e=>e()),e.clear()}const be=ue(({id:e})=>{const[t]=e.split("-");return()=>{const e=he.get(t);if(e)return e.invalidator()}}),ve=(ue(({id:e})=>({get(t){const[r]=e.split("-"),n=he.get(r);if(n){n.nodeMap=n.nodeMap||new y;const e=n.nodeMap.get(t);if(e)return e;fe.add(`${r}-${t}`)}return null}})),ue(({id:e})=>(t,r)=>{const[n]=e.split("-"),s=he.get(n);if(s){s.customDiffMap=s.customDiffMap||new y,s.customDiffProperties=s.customDiffProperties||new o;const n=s.customDiffMap.get(e)||new y;n.has(t)||(n.set(t,r),s.customDiffProperties.add(t)),s.customDiffMap.set(e,n)}})),we=ue(({id:e})=>t=>{const[r]=e.split("-"),n=he.get(r);n&&(n.destroyMap=n.destroyMap||new y,n.destroyMap.has(e)||n.destroyMap.set(e,t))}),Oe=ue(({id:e})=>{const[t]=e.split("-");return()=>{const e=he.get(t);return e?(e.registryHandler||(e.registryHandler=new $,e.registryHandler.base=e.registry,e.registryHandler.on("invalidate",e.invalidator)),e.registryHandler=e.registryHandler||new $,e.registryHandler):null}});ue(({id:e})=>{const[t]=e.split("-");let r=!1;return{pause(){const e=he.get(t);!r&&e&&(e.deferRefs=e.deferRefs+1,r=!0)},resume(){const e=he.get(t);r&&e&&(e.deferRefs=e.deferRefs-1,r=!1)}}});function Ae(e){let t,r,o={sync:!1,merge:!0,transition:void 0,domNode:n.default.document.body,registry:new I},i=[],a=[],d=[],c=[],l=new s,u=new y,p=new s,h=new y,f=new s,g=new s,m=[],_=[],b=[];function v(e,t,r,n){let s=t&&!r;"function"==typeof t&&(s=t()),!0===s&&_.push(()=>{n[e]()})}function w(e,t,r,n){if(n){const r=l.get(n);r&&e.removeEventListener(t,r)}let s=r;"input"===t&&(s=function(e){r.call(this,e),e.target["oninput-value"]=e.target.value}),e.addEventListener(t,s),l.set(r,s)}function O(e,t,r,n=!1){Object.keys(t).forEach(s=>{const o="on"===s.substr(0,2)||n,i=n?s:s.substr(2);if(o&&!r[s]){const r=l.get(t[s]);r&&e.removeEventListener(i,r)}})}function A(e,t,r){if(!N(e.node.widgetConstructor)){const n=g.get(e.node);let s;if(n&&(n.instance?t=n.instance:r=n.id),t){const e=pe.get(t);e&&(s=e.registry)}else if(void 0!==r){const e=he.get(r);e&&(e.registryHandler||(e.registryHandler=new $,e.registryHandler.base=e.registry,e.registryHandler.on("invalidate",e.invalidator)),s=e.registryHandler)}if(s){let t;if(function(e){return Boolean(e&&e.label)}(e.node.widgetConstructor)){const{label:r,registryItem:n}=e.node.widgetConstructor;s.has(r)||s.define(r,n),t=r}else t=e.node.widgetConstructor;let r=s.get(t);if(k(r)){const t=r(e.node.properties,e.node.children);P(t.widgetConstructor)&&(e.registryItem=t.widgetConstructor)}else e.registryItem=r}}}function j(e,t,r){const{requiresInsertBefore:n,hasPreviousSiblings:s,namespace:o,depth:i}=t,a=[],d=V(t),c=F(t),l=(K(r)&&h.get(r.id)||[]).length>0,f=(n||!1!==s)&&(d||c)||l&&e.length>1;let y;V(t)&&e.length&&function(e,t){for(;e.length;){let r=e.pop();(J(r)||U(r))&&(g.has(r)||(g.set(r,t),r.children&&r.children.length&&(e=[...e,...r.children])))}}([...e],t);for(let r=0;r<e.length;r++){let n=e[r];if(!n||!0===n)continue;"string"==typeof n&&(n={tag:"",properties:{},children:void 0,text:`${n}`,type:q});const s=g.get(n),c={node:n,depth:i+1,order:r,parentId:t.id,requiresInsertBefore:f,hasParentWNode:d,namespace:o};if(U(n)&&(n.deferredPropertiesCallback&&(c.deferredProperties=n.deferredPropertiesCallback(!1)),n.properties.exitAnimation)){t.hasAnimations=!0;let e=u.get(t.parentId);for(;e&&!e.hasAnimations;)e.hasAnimations=!0,e=u.get(e.parentId)}s&&(c.owningId=s.id),J(n)&&A(c,t.instance,t.id),y&&p.set(y,c),a.push(c),y=c}return a}function E(e){const{deferredPropertiesCallback:t}=e.node;if(t){const r=e.node.properties;_.push(()=>{if(u.has(e.owningId)){const n=e.deferredProperties;e.deferredProperties=t(!0),W(e,{properties:Object.assign({},n,r)})}})}}function C(e){let t=null,r=e;for(;!t;){const e=p.get(r);if(e){let n=e.domNode;if((V(e)||F(e))&&e.childDomWrapperId){const t=u.get(e.childDomWrapperId);t&&(n=t.domNode)}if(n&&n.parentNode){t=n;break}r=e}else if(!(r=r&&u.get(r.parentId))||K(r)&&!F(r))break}return t}function R(e,t,r){const n=e.value,s=e["oninput-value"],o=e["select-value"];o&&n!==o?(e.value=o,e.value===o&&(e["select-value"]=void 0)):(s&&n===s||t!==r)&&(e.value=t,e["oninput-value"]=void 0)}function L(e,t={},r,n=!0){const s=r.deferredProperties?Object.assign({},r.deferredProperties,r.node.properties):r.node.properties,o=Object.keys(s),i=o.length;-1===o.indexOf("classes")&&t.classes&&e.removeAttribute("class"),n&&O(e,t,s);for(let a=0;a<i;a++){const i=o[a];let d=s[i];const c=t[i];if("classes"===i){const t=ie(c);let n=ie(d);if(t!==n)if(n){if(r.merged){const t=(e.getAttribute("class")||"").split(" ");for(let e=0;e<t.length;e++)-1===n.indexOf(t[e])&&(n=`${t[e]} ${n}`)}e.setAttribute("class",n)}else e.removeAttribute("class")}else if(-1!==S.indexOf(i))v(i,d,c,e);else if("styles"===i){const t=Object.keys(d),r=t.length;for(let n=0;n<r;n++){const r=t[n],s=d[r];s!==(c&&c[r])&&(e.style[r]=s||"")}}else if(d||"string"!=typeof c||(d=""),"value"===i)"SELECT"===e.tagName&&(e["select-value"]=d),R(e,d,c);else if("key"!==i&&d!==c){const t=typeof d;"function"===t&&0===i.lastIndexOf("on",0)&&n?w(e,i.substr(2),d,c):"string"===t&&"innerHTML"!==i&&n?ae(e,i,d,r.namespace):"scrollLeft"===i||"scrollTop"===i?e[i]!==d&&(e[i]=d):e[i]=d}}}function W(e,t){if(e.node.attributes&&e.node.events){!function(e,t,r,n){const s=Object.keys(r),o=s.length;for(let i=0;i<o;i++){const o=s[i],a=r[o];a!==t[o]&&ae(e,o,a,n)}}(e.domNode,t.attributes||{},e.node.attributes,e.namespace),L(e.domNode,t.properties,e,!1);const r=e.node.events||{};t.events&&O(e.domNode,t.events||{},e.node.events,!0),t.events=t.events||{},Object.keys(r).forEach(n=>{w(e.domNode,n,r[n],t.events[n])})}else L(e.domNode,t.properties,e)}function B(){const{sync:e}=o;e?Z():t||(t=n.default.requestAnimationFrame(()=>{Z()}))}function X(e){const t=u.get(e);if(t&&V(t))return t}function Z(){t=void 0;let e=[...i];const r=[];let n;for(i=[],e.sort((e,t)=>{let r=t.depth-e.depth;return 0===r&&(r=t.order-e.order),r}),d.length&&(a=[...d],d=[],te(),d.length&&(i=[...e],e=[]));n=e.pop();){let{id:e}=n;const t=X(e);if(!t||-1!==r.indexOf(e)||!u.has(t.parentId))continue;r.push(e);const s=p.get(t),o={node:{type:H,widgetConstructor:t.node.widgetConstructor,properties:t.properties||{},children:t.node.children||[]},instance:t.instance,id:t.id,properties:t.properties,depth:t.depth,order:t.order,owningId:t.owningId,parentId:t.parentId,registryItem:t.registryItem};s&&p.set(o,s);const i=ve({current:t,next:o});i&&i.item&&(a.push(i.item),u.set(e,o),te())}re(),ee(),ce()}function ee(){if(0===d.length){let e;for(;e=b.pop();)e.parentNode&&e.parentNode.removeChild(e);o.merge=!1}}function te(){let e;for(;e=a.pop();)if(e.type)"attach"===e.type&&we(e.id),e.instance&&c.push(e);else{const{current:t,next:r,meta:n}=e;fe(t||D,r||D,n)}}function re(){let e;for(c.reverse();e=c.pop();)if("create"===e.type){const{parentDomNode:t,next:r,next:{domNode:n,merged:s,requiresInsertBefore:i,node:a}}=e;if(W(r,{properties:{}}),E(r),!s){let e;i?e=C(r):f&&(e=f.get(r)),t.insertBefore(n,e),Y(r.node)&&r.node.onAttach&&r.node.onAttach()}"OPTION"===n.tagName&&n.parentElement&&R(n.parentElement);const{enterAnimation:d,enterAnimationActive:c}=a.properties;o.transition&&d&&!0!==d&&o.transition.enter(n,d,c);const l=g.get(r.node);if(l&&null!=a.properties.key)if(l.instance){const e=pe.get(l.instance);e&&e.nodeHandler.add(n,`${a.properties.key}`)}else me(l.id,a.properties.key,n);e.next.inserted=!0}else if("update"===e.type){const{next:t,next:{domNode:r},current:n,current:{domNode:s}}=e;if(Q(r)&&Q(s)&&r!==s)s.parentNode&&s.parentNode.replaceChild(r,s);else{W(t,ne(r,n)),E(t)}}else if("delete"===e.type){const{current:t}=e,{exitAnimation:r,exitAnimationActive:n}=t.node.properties;o.transition&&r&&!0!==r?o.transition.exit(t.domNode,r,n):t.domNode.parentNode.removeChild(t.domNode)}else if("attach"===e.type){const{instance:t,attached:r}=e,n=pe.get(t);n&&(n.nodeHandler.addRoot(),r&&n.onAttach())}else if("detach"===e.type){if(e.current.instance){const t=pe.get(e.current.instance);t&&t.onDetach()}e.current.instance=void 0}0===d.length&&(g=new s)}function ce(){!function(){const{sync:e}=o,t=m;if(m=[],t.length){const r=()=>{let e;for(;e=t.shift();)e()};e?r():n.default.requestIdleCallback?n.default.requestIdleCallback(r):setTimeout(r)}}(),function(){const{sync:e}=o,t=_;if(_=[],t.length){const r=()=>{let e;for(;e=t.shift();)e()};e?r():n.default.requestAnimationFrame(r)}}()}function le(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(null==n.node.properties.key)return!1;t.push(n.node.properties.key)}return t}function fe(e,t,r={}){let{mergeNodes:n=[],oldIndex:s=0,newIndex:i=0}=r;const l=e.length,u=t.length,p=l>1||l>0&&l<u;let h=[],f=!1;if(0===s&&0===i&&l){const r=le(e);if(r){const n=le(t);if(n)for(let t=0;t<r.length;t++){if(-1!==n.indexOf(r[t])){h=[],f=!1;break}f=!0,h.push({current:e[t],next:void 0})}}}if(f||0===l&&!o.merge)for(let e=0;e<t.length;e++)h.push({current:void 0,next:t[e]});else{if(i<u){let r=s<l?e[s]:void 0;const a=t[i];a.hasPreviousSiblings=p,function(e,t){const{merge:r}=o;if(r&&t.length)if(K(e)){let{node:{tag:r}}=e;for(let n=0;n<t.length;n++){const s=t[n],o=s.tagName||"";if(r.toUpperCase()===o.toUpperCase()){const r=b.indexOf(s);-1!==r&&b.splice(r,1),t.splice(n,1),e.domNode=s;break}}}else e.mergeNodes=t}(a,n),r&&se(r,a)?(s++,i++,K(r)&&K(a)&&(a.inserted=r.inserted),h.push({current:r,next:a})):r&&-1!==oe(e,a,s+1)?-1===oe(t,r,i+1)?(h.push({current:r,next:void 0}),s++):(h.push({current:r,next:void 0}),h.push({current:void 0,next:a}),s++,i++):(h.push({current:void 0,next:a}),i++)}if(i<u&&a.push({current:e,next:t,meta:{mergeNodes:n,oldIndex:s,newIndex:i}}),l>s&&i>=u)for(let t=s;t<l;t++)h.push({current:e[t],next:void 0})}for(let s=0;s<h.length;s++){const l=be(h[s]);if(!1===l){if(o.merge&&n.length){i<u&&a.pop(),a.push({next:t,current:e,meta:r}),d=a,a=[];break}continue}const{widget:p,item:f,dom:g}=l;p&&a.push(p),f&&a.push(f),g&&c.push(g)}}function be({current:e,next:t}){if(e!==t){if(!e&&t)return K(t)?function({next:e}){const t=function(e){let t,r=u.get(e.parentId);for(;!t&&r;)!t&&K(r)&&!F(r)&&r.domNode&&(t=r.domNode),r=u.get(r.parentId);return t}(e),r=F(e),s=z(e);let i,a=[];e.id=`${ge++}`,u.set(e.id,e),e.domNode?o.merge&&(e.merged=!0,Q(e.domNode)?e.domNode.data!==e.node.text&&(b=[e.domNode,...b],e.domNode=n.default.document.createTextNode(e.node.text),e.merged=!1):(a=de(e.domNode.childNodes),b=[...b,...a])):(e.node.domNode?e.domNode=e.node.domNode:("svg"===e.node.tag&&(e.namespace=T),s?e.domNode=n.default.document.body:e.node.tag&&!r?e.namespace?e.domNode=n.default.document.createElementNS(e.namespace,e.node.tag):e.domNode=n.default.document.createElement(e.node.tag):null!=e.node.text&&(e.domNode=n.default.document.createTextNode(e.node.text))),f&&b.length&&t===b[0].parentNode&&f.set(e,b[0]));(e.domNode||r)&&e.node.children&&e.node.children.length&&(i=j(e.node.children,e,null),h.set(e.id,i));const d=r||s?void 0:{next:e,parentDomNode:t,type:"create"};if(i)return{item:{current:[],next:i,meta:{mergeNodes:a}},dom:d,widget:r?{type:"attach",id:e.id,attached:!1}:void 0};return{dom:d}}({next:t}):function({next:e}){let t,n,{node:{widgetConstructor:s}}=e,{registry:a}=o,d=e.registryItem||s;if(!N(d)){if(A(e),!e.registryItem)return!1;d=e.registryItem}e.properties=e.node.properties,e.id=e.id||`${ge++}`,u.set(e.id,e);const{id:c,depth:l,order:p}=e;if(x(d)){let r=new d;r.registry.base=a;const s=pe.get(r);n=(()=>{s.dirty=!0,!s.rendering&&u.has(c)&&(i.push({id:c,depth:l,order:p}),B())}),s.invalidate=n,s.rendering=!0,r.__setProperties__(e.node.properties),r.__setChildren__(e.node.children),e.instance=r,t=r.__render__(),s.rendering=!1}else{let r=he.get(c);if(r?n=r.invalidator:(n=(()=>{const e=he.get(c);e&&(e.dirty=!0,!e.rendering&&u.has(c)&&(i.push({id:c,depth:l,order:p}),B()))}),r={dirty:!1,invalidator:n,properties:e.node.properties,children:e.node.children,deferRefs:0,rendering:!0,registry:o.registry},he.set(e.id,r),r.middleware=d.middlewares?function e(t,r){const n=Object.keys(t);const s={};const o=`${r}-${ye++}`;for(let i=0;i<n.length;i++){const a=t[n[i]](),d={id:o,properties:()=>{const e=he.get(r);return e?Object.assign({},e.properties):{}},children:()=>{const e=he.get(r);return e?e.children:[]}};if(a.middlewares){const t=e(a.middlewares,r);d.middleware=t,s[n[i]]=a.callback(d)}else s[n[i]]=a.callback(d)}return s}(d.middlewares,c):{}),t=d({id:c,properties:()=>e.node.properties,children:()=>e.node.children,middleware:r.middleware}),r.rendering=!1,r.deferRefs>0)return!1}let f;t&&(t=Array.isArray(t)?t:[t],f=j(t,e,null),h.set(c,f));r||d.isWNodeWrapper||(r=n);return{item:{next:f,meta:{mergeNodes:e.mergeNodes}},widget:{type:"attach",instance:e.instance,id:c,attached:!0}}}({next:t});if(e&&t){if(K(e)&&K(t))return function({current:e,next:t}){let r;t.domNode=e.domNode,t.namespace=e.namespace,t.id=e.id,t.childDomWrapperId=e.childDomWrapperId;let s=h.get(t.id);null!=t.node.text&&t.node.text!==e.node.text?t.domNode=n.default.document.createTextNode(t.node.text):t.node.children&&(r=j(t.node.children,t,e),h.set(t.id,r));return p.delete(e),u.set(t.id,t),{item:{current:s,next:r,meta:{}},dom:{type:"update",next:t,current:e}}}({current:e,next:t});if(V(e)&&V(t))return ve({current:e,next:t})}else if(e&&!t){if(K(e))return function({current:e}){const t=F(e),r=z(e),n=h.get(e.id);if(h.delete(e.id),u.delete(e.id),p.delete(e),e.node.properties.key){const t=he.get(e.owningId),r=X(e.owningId);if(t)t.nodeMap&&t.nodeMap.delete(e.node.properties.key);else if(r&&r.instance){const t=pe.get(r.instance);t&&t.nodeHandler.remove(e.node.properties.key)}}if(e.hasAnimations||t||r)return{item:{current:n,meta:{}},dom:t||r?void 0:{type:"delete",current:e}};n&&_.push(()=>{let e,t=n||[],r=[];for(;e=t.pop();){if(V(e))if((e=X(e.id)||e).instance){const t=pe.get(e.instance);t&&t.onDetach(),e.instance=void 0}else{const t=he.get(e.id);t&&(t.registryHandler&&t.registryHandler.destroy(),t.destroyMap&&_e(t.destroyMap),he.delete(e.id))}let n=h.get(e.id);n&&t.push(...n),z(e)?r.push(e.id):-1!==r.indexOf(e.parentId)&&(V(e)||F(e)?r.push(e.id):e.domNode&&e.domNode.parentNode&&e.domNode.parentNode.removeChild(e.domNode)),h.delete(e.id),u.delete(e.id)}});return{dom:{type:"delete",current:e}}}({current:e});if(V(e))return function({current:e}){e=X(e.id)||e,u.delete(e.id);const t=he.get(e.id);let r=h.get(e.id);h.delete(e.id),p.delete(e);let n={item:{current:r,meta:{}}};t?(t.registryHandler&&t.registryHandler.destroy(),t.destroyMap&&_e(t.destroyMap),he.delete(e.id)):n.widget={type:"detach",current:e,instance:e.instance};return n}({current:e})}}return{}}function ve({current:e,next:t}){e=X(e.id)||e;const{instance:r,domNode:n,hasAnimations:s}=e;let{node:{widgetConstructor:o}}=t;const i=t.registryItem||o;if(!N(i))return{};let a,d,c={},l=!1,f=h.get(e.id);if(t.hasAnimations=s,t.id=e.id,t.childDomWrapperId=e.childDomWrapperId,t.properties=t.node.properties,p.delete(e),n&&n.parentNode&&(t.domNode=n),x(i)){const e=pe.get(r);t.instance=r,e.rendering=!0,r.__setProperties__(t.node.properties),r.__setChildren__(t.node.children),e.dirty&&(l=!0,h.delete(t.id),a=r.__render__()),e.rendering=!1}else{const r=he.get(t.id);r&&(r.properties=t.properties,r.rendering=!0,function(e,t,r){e.customDiffMap=e.customDiffMap||new y,e.customDiffMap.size&&e.customDiffMap.forEach(e=>{e.forEach(e=>e(Object.assign({},t),Object.assign({},r)))})}(r,e.properties,t.properties),(e.node.children.length>0||t.node.children.length>0)&&(r.dirty=!0),r.dirty||function(e,t,r,n){const s=[...Object.keys(e),...Object.keys(t)];for(let o=0;o<s.length;o++)if(!(n.indexOf(s[o])>-1)){if(M(e[s[o]],t[s[o]]).changed){r();break}n.push(s[o])}}(e.properties,t.properties,()=>{r.dirty=!0},r.customDiffProperties?[...r.customDiffProperties.values()]:[]),r.dirty&&(h.delete(t.id),l=!0,r.dirty=!1,a=i({id:t.id,properties:()=>t.node.properties,children:()=>t.node.children,middleware:r.middleware}),r.deferRefs>0&&(a=null)),r.rendering=!1)}return u.set(t.id,t),c.widget={type:"attach",instance:r,id:t.id,attached:!1},a&&(d=j(a=Array.isArray(a)?a:[a],t,e),h.set(t.id,d)),l&&(c.item={current:f,next:d,meta:{}}),c}function we(e){let t,r=u.get(e),n=[...h.get(e)||[]];for(;n.length&&!r.domNode;)if(t=n.shift()){if(t.domNode){r.childDomWrapperId=t.id;break}let e=h.get(t.id);e&&(n=[...e,...n])}}return{mount:function(t={}){o=Object.assign({},o,t);const{domNode:r}=o,n=function(e){const t=e(),r=J(t),n=()=>t;return n.isWNodeWrapper=r,ue(n)}(e)({}),s={id:`${ge++}`,node:n,order:0,depth:1,owningId:"-1",parentId:"-1",siblingId:"-1",properties:{}};u.set("-1",{id:"-1",depth:0,order:0,owningId:"",domNode:r,node:G("fake"),parentId:"-1"}),a.push({current:[],next:[s],meta:{mergeNodes:de(r.childNodes)}}),te(),re(),ee(),f=void 0,ce()},invalidate:function(){r&&r()}}}class je{constructor({window:e=n.default.window,onChange:t}){this._onChange=(()=>{const e=this.normalizePath(this._window.location.hash);e!==this._current&&(this._current=e,this._onChangeFunction(this._current))}),this._onChangeFunction=t,this._window=e,this._window.addEventListener("hashchange",this._onChange,!1),this._current=this.normalizePath(this._window.location.hash),this._onChangeFunction(this._current)}normalizePath(e){return e.replace("#","")}prefix(e){return"#"!==e[0]?`#${e}`:e}set(e){this._window.location.hash=this.prefix(e),this._onChange()}get current(){return this._current}destroy(){this._window.removeEventListener("hashchange",this._onChange)}}const xe="__PARAM__",Pe=new RegExp(/^{.+}$/),ke=7,Ne=2;function Ie({params:e},{params:t}){return!!Object.keys(e).every(r=>e[r]===t[r])&&Object.keys(t).every(r=>e[r]===t[r])}class Ee extends A{constructor(e,t={}){super(),this._routes=[],this._outletMap=Object.create(null),this._matchedOutlets=Object.create(null),this._currentParams={},this._currentQueryParams={},this._onChange=(e=>{e=this._stripLeadingSlash(e);const t=this._matchedOutlets;this._matchedOutlets=Object.create(null);const[r,n]=e.split("?");this._currentQueryParams=this._getQueryParams(n);const s=r.split("/");let o,i=this._routes.map(e=>({route:e,segments:[...s],parent:void 0,params:{}})),a=[];for(;o=i.pop();){const{route:e,parent:t,segments:r,params:n}=o;let s=0,d="index",c=0,l=!0;if(r.length<e.segments.length)l=!1;else for(;r.length>0;){if(void 0===e.segments[s]){d="partial";break}const t=r.shift();if(e.segments[s]===xe)n[e.params[c++]]=t,this._currentParams=Object.assign({},this._currentParams,n);else if(e.segments[s]!==t){l=!1;break}s++}l&&(o.type=d,a.push({route:e,parent:t,type:d,params:n,segments:[]}),r.length&&(i=[...i,...e.children.map(e=>({route:e,segments:[...r],parent:o,type:d,params:Object.assign({},n)}))]))}let d=void 0,c=a.reduce((e,t)=>e&&e.route.score>t.route.score?e:t,void 0);if(c)for("partial"===c.type&&(c.type="error"),d=c.route.outlet;c;){let{type:e,params:r,parent:n,route:s}=c;const o={id:s.outlet,queryParams:this._currentQueryParams,params:r,type:e,isError:()=>"error"===e,isExact:()=>"index"===e},i=t[s.outlet];this._matchedOutlets[s.outlet]=o,i&&Ie(i,o)||this.emit({type:"outlet",outlet:o,action:"enter"}),c=n}else this._matchedOutlets.errorOutlet={id:"errorOutlet",queryParams:{},params:{},isError:()=>!0,isExact:()=>!1,type:"error"};const l=Object.keys(t);for(let e=0;e<l.length;e++){const r=l[e],n=this._matchedOutlets[r];n&&Ie(t[r],n)||this.emit({type:"outlet",outlet:t[r],action:"exit"})}this.emit({type:"nav",outlet:d,context:d?this._matchedOutlets[d]:void 0})}),this._options=t,this._register(e),t.autostart,this.start()}setPath(e){this._history.set(e)}start(){const{HistoryManager:e=je,base:t,window:r}=this._options;if(this._history=new e({onChange:this._onChange,base:t,window:r}),this._matchedOutlets.errorOutlet&&this._defaultOutlet){const e=this.link(this._defaultOutlet);e&&this.setPath(e)}}link(e,t={}){const{_outletMap:r,_currentParams:n,_currentQueryParams:s}=this;let o=r[e];if(void 0===o)return;let i=o.fullPath;if(o.fullQueryParams.length>0){i=`${i}${o.fullQueryParams.reduce((e,t,r)=>r>0?`${e}&${t}={${t}}`:`?${t}={${t}}`,"")}`}if(t=Object.assign({},o.defaultParams,s,n,t),0===Object.keys(t).length&&o.fullParams.length>0)return;const a=[...o.fullParams,...o.fullQueryParams];for(let e=0;e<a.length;e++){const r=a[e];if(!t[r])return;i=i.replace(`{${r}}`,t[r])}return this._history.prefix(i)}getOutlet(e){return this._matchedOutlets[e]}get currentParams(){return this._currentParams}_stripLeadingSlash(e){return"/"===e[0]?e.slice(1):e}_register(e,t,r){t=t||this._routes;for(let n=0;n<e.length;n++){let{path:s,outlet:o,children:i,defaultRoute:a=!1,defaultParams:d={}}=e[n],[c,l]=s.split("?"),u=[];const p=(c=this._stripLeadingSlash(c)).split("/"),h={params:[],outlet:o,path:c,segments:p,defaultParams:r?Object.assign({},r.defaultParams,d):d,children:[],fullPath:r?`${r.fullPath}/${c}`:c,fullParams:[],fullQueryParams:[],score:r?r.score:0};a&&(this._defaultOutlet=o);for(let e=0;e<p.length;e++){const t=p[e];h.score+=ke,Pe.test(t)&&(h.score-=Ne,h.params.push(t.replace("{","").replace("}","")),p[e]=xe)}l&&(u=l.split("&").map(e=>e.replace("{","").replace("}",""))),h.fullQueryParams=r?[...r.fullQueryParams,...u]:u,h.fullParams=r?[...r.fullParams,...h.params]:h.params,i&&i.length>0&&this._register(i,h.children,h),this._outletMap[o]=h,t.push(h)}}_getQueryParams(e){const t={};if(e){const r=e.split("&");for(let e=0;e<r.length;e++){const[n,s]=r[e].split("=");t[n]=s}}return t}}var Ce=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};var Re=le({getRegistry:Oe,invalidator:be,destroy:we})(({middleware:{getRegistry:e,invalidator:t,destroy:r}})=>{const n=[];r(()=>{let e;for(;e=n.pop();)e.destroy()});const s=e();return{subscribe(e,r=t){if(s){const t=s.getInjector(e);if(t){const e=t.invalidator.on("invalidate",()=>{r()});return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&(n.splice(t,1),e.destroy())}}}},get(e){if(s){const t=s.getInjector(e);if(t)return t.injector()}return null}}});function Me(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function $e(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function Le(e,t,r=!0,n=!0){r&&(t=Object.assign({},t));const s={object:t,target:t,segment:""};return e.reduce((t,s,o)=>{if(void 0===t.target)return t;if(Array.isArray(t.target)&&"-"===s&&(s=String(t.target.length-1)),o+1<e.length){const i=e[o+1];let a=t.target[s];if(void 0===a&&!n)return t.target=void 0,t;r||void 0===a?(a=Array.isArray(a)?[...a]:"object"==typeof a?Object.assign({},a):isNaN(i)||isNaN(parseInt(i,0))?{}:[],t.target[s]=a,t.target=a):t.target=a}else t.segment=s;return t},s)}class De{constructor(e){if(Array.isArray(e)?this._segments=e:(this._segments=("/"===e[0]?e:`/${e}`).split("/"),this._segments.shift()),0===e.length||1===e.length&&"/"===e[0]||""===e[0])throw new Error("Access to the root is not supported.");this._segments=this._segments.map(Me)}get segments(){return this._segments}get path(){return`/${this._segments.map($e).join("/")}`}get(e){const t=Le(this.segments,e,!1,!1);if(void 0!==t.target)return t.target[t.segment]}toJSON(){return this.toString()}toString(){return this.path}}function Se(e){return function(t,...r){return e.apply(t,r)}}let Te,We,He,qe,Be,Qe,Ve;Te=Array.from,We=Array.of,He=Se(Array.prototype.copyWithin),qe=Se(Array.prototype.fill),Be=Se(Array.prototype.find),Qe=Se(Array.prototype.findIndex),Ve=Se(Array.prototype.includes);var Ke;function Fe(e){return"[object Object]"===Object.prototype.toString.call(e)}function ze(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,r)=>ze(e,t[r]));if(Fe(e)&&Fe(t)){const r=Object.keys(e).sort();return ze(r,Object.keys(t).sort())&&r.every(r=>ze(e[r],t[r]))}return e===t}function Je(e,t){const r=Ue(t),n=Ue(e);if(Array.isArray(e)&&Array.isArray(t)){const r=function(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(!ze(e[n],t[n]))return n;return e.length!==t.length?r:-1}(e,t);return-1!==r?`Arrays differed at offset ${r}`:"Arrays are identical"}if(Fe(e)&&Fe(t)){const r=function(e,t){const r=Te(new o([...Object.keys(e),...Object.keys(t)]).values());for(let n of r)if(!ze(e[n],t[n]))return n}(e,t);if(r){return`Expected "${e[r]}" for object property ${r} but got "${t[r]}" instead`}return"Objects are identical"}return ze(e,t)?"Values are identical":r===n?`Expected "${e}" but got "${t}" instead`:`Expected ${n} "${e}" but got ${r} "${t}" instead`}function Ue(e){return Array.isArray(e)?"array":typeof e}function Ye(e,t){if(e.op===Ke.ADD){const t={op:Ke.REMOVE,path:e.path};return[{op:Ke.TEST,path:e.path,value:e.value},t]}if(e.op===Ke.REPLACE){let r;return r=void 0===e.path.get(t)?{op:Ke.REMOVE,path:e.path}:{op:Ke.REPLACE,path:e.path,value:e.path.get(t)},[{op:Ke.TEST,path:e.path,value:e.value},r]}return[{op:Ke.ADD,path:e.path,value:e.path.get(t)}]}!function(e){e.ADD="add",e.REMOVE="remove",e.REPLACE="replace",e.TEST="test"}(Ke||(Ke={}));class Xe{constructor(e){this._operations=Array.isArray(e)?e:[e]}apply(e){let t=[];return{object:this._operations.reduce((e,r)=>{let n;const s=Le(r.path.segments,e);switch(r.op){case Ke.ADD:n=function(e,t){let r=parseInt(e.segment,10);return Array.isArray(e.target)&&!isNaN(r)?e.target.splice(r,0,t):e.target[e.segment]=t,e.object}(s,r.value);break;case Ke.REPLACE:n=function(e,t){let r=parseInt(e.segment,10);return Array.isArray(e.target)&&!isNaN(r)?e.target.splice(r,1,t):e.target[e.segment]=t,e.object}(s,r.value);break;case Ke.REMOVE:n=function(e){return Array.isArray(e.target)?e.target.splice(parseInt(e.segment,10),1):delete e.target[e.segment],e.object}(s);break;case Ke.TEST:const t=s.target[s.segment];if(!ze(t,r.value)){const e=r.path.path;throw new Error(`Test operation failure at "${e}". ${Je(r.value,t)}.`)}return e;default:throw new Error("Unknown operation")}return t=[...Ye(r,e),...t],n},e),undoOperations:t}}}function Ge(e){return"string"==typeof e}class Ze{constructor(){this._state={},this.get=(e=>e.value),this.apply=(e=>{const t=new Xe(e).apply(this._state);return this._state=t.object,t.undoOperations}),this.at=((e,t)=>{const r=this.get(e),n=r&&r[t];return{path:`${e.path}/${t}`,state:e.state,value:n}}),this.path=((e,...t)=>{const r=(t="string"==typeof e?[e,...t]:[...new De(e.path).segments,...t]).filter(Ge),n=r.length>1,s=new De(n?r:r[0]||"");return{path:s.path,state:this._state,value:s.get(this._state)}})}}var et=class extends O{constructor(e){super(),this._adapter=new Ze,this._changePaths=new y,this._callbackId=0,this.get=(e=>this._adapter.get(e)),this.apply=((e,t=!1)=>{const r=this._adapter.apply(e);return t&&this.invalidate(),r}),this.at=((e,t)=>this._adapter.at(e,t)),this.onChange=((e,t)=>{const r=this._callbackId;return Array.isArray(e)||(e=[e]),e.forEach(e=>this._addOnChange(e,t,r)),this._callbackId+=1,{remove:()=>{e.forEach(e=>{const t=this._changePaths.get(e.path);t&&(t.callbacks=t.callbacks.filter(e=>e.callbackId!==r))})}}}),this._addOnChange=((e,t,r)=>{let n=this._changePaths.get(e.path);n||(n={callbacks:[],previousValue:this.get(e)}),n.callbacks.push({callbackId:r,callback:t}),this._changePaths.set(e.path,n)}),this.path=this._adapter.path.bind(this._adapter),e&&e.state&&(this._adapter=e.state,this.path=this._adapter.path.bind(this._adapter))}_runOnChanges(){const e=[];this._changePaths.forEach((t,r)=>{const{previousValue:n,callbacks:s}=t,o=new De(r),i=o.segments.length?this._adapter.path(o.segments[0],...o.segments.slice(1)).value:void 0;n!==i&&(this._changePaths.set(r,{callbacks:s,previousValue:i}),s.forEach(t=>{const{callback:r,callbackId:n}=t;-1===e.indexOf(n)&&(e.push(n),r())}))})}invalidate(){this._runOnChanges(),this.emit({type:"invalidate"})}};const tt=le({destroy:we,invalidator:be,injector:Re}),rt=e=>{let t=new et,r=!1;return e&&e(t),tt(({middleware:{destroy:e,invalidator:n,injector:s}})=>{const o=[];if(e(()=>{let e;for(;e=o.pop();)e()}),!r){const e=s.get("state");e&&(t=e),r=!0}const i=[];return{get(e){if(-1===i.indexOf(e.path)){const r=t.onChange(e,()=>{n()});o.push(()=>r.remove()),i.push(e.path)}return t.get(e)},path:(e,...r)=>t.path(e,...r),at:(e,r)=>t.at(e,r),executor:e=>e(t)}})};const nt=new y,st=Symbol("value");const ot="State updates are not available on legacy browsers";function it(e,t,r,n,s,o){const{apply:i,get:a,path:d,at:c}=r;function l(e,t,n){return e(r)(t)}return async u=>{const p=[],h=[...t];let f=[],g=h.shift(),_=null;const b=o?o(u):u;if(n){let t=n(b,r,e);t&&await t}function v(){const e=new y,t=new y,r=[],n=s=>({get(r,o){const i=s?d(s,o):d(o),c=i.path;if("symbol"==typeof o&&o===st)return t.get(c);let l=s||r.hasOwnProperty(o)?r[o]:a(i);if("object"==typeof l&&null!==l){let s;return e.has(c)?s=e.get(c):(l=Array.isArray(l)?l.slice():Object.assign({},l),s=new Proxy(l,n(i)),e.set(c,s),t.set(c,l)),r[o]=l,s}return r[o]=l,l},set:(e,t,n)=>(n=function e(t){if("object"==typeof t&&null!==t){t[st]&&(t=t[st]);const r=Array.isArray(t)?[]:{},n=Object.keys(t);for(let s=0;s<n.length;s++)r[n[s]]=e(t[n[s]]);t=r}return t}(n),r.push(function(e,t){return{op:Ke.REPLACE,path:new De(e.path),value:t}}(s?d(s,t):d(t),n)),e[t]=n,!0),deleteProperty:(e,t)=>(r.push(function(e){return{op:Ke.REMOVE,path:new De(e.path)}}(s?d(s,t):d(t))),delete e[t],!0)});return{proxy:new Proxy({},n()),operations:r}}try{for(;g;){let e=[];let t;t=(e=(Array.isArray(g)?g:[g]).map(e=>{let t,r=[];if("undefined"!=typeof Proxy){const{operations:e,proxy:n}=v();t=n,r=e}let n=e({at:c,get:a,path:d,payload:b,get state(){if("undefined"==typeof Proxy)throw new Error(ot);return t}});return Object(m.isThenable)(n)?n.then(e=>e=e?[...r,...e]:[...r]):n=n&&Array.isArray(n)?[...r,...n]:[...r]})).some(m.isThenable)?await Promise.all(e):e;for(let r=0;r<e.length;r++)p.push(...t[r]),f=[...i(t[r]),...f];r.invalidate(),g=h.shift()}}catch(e){if(e.message===ot)throw e;_={error:e,command:g}}return s&&s(_,{undoOperations:f,store:r,id:e,operations:p,apply:i,at:c,get:a,path:d,executor:l,payload:b}),Promise.resolve({store:r,undoOperations:f,id:e,error:_,operations:p,apply:i,at:c,get:a,path:d,executor:l,payload:b})}}function at(e,t,r){const n=(r=Array.isArray(r)?r:r?[r]:[]).length?r.reduce((t,r)=>(function(e,t){const{before:r,after:n}=e();return e=>{const{before:s,after:o}=e?e():{};return()=>({after(e,t){o&&o(e,t),n&&n(e,t)},before(e,n){s&&s(e,n,t),r&&r(e,n,t)}})}})(r,e)(t)):void 0,{before:s,after:o}=n?n():{};return nt.set(e,[e,t,s,o]),(r,n)=>it(e,t,r,s,o,n)}var dt=le({destroy:we})(({middleware:{destroy:e}})=>{const t=new y;return e(()=>{t.clear()}),{get:e=>t.get(e),set(e,r){t.set(e,r)},clear(){t.clear()}}});var ct=le({cache:dt,injector:Re,diffProperty:ve,invalidator:be}).properties()(function({middleware:{cache:e,injector:t,diffProperty:r,invalidator:n},properties:s}){const{renderer:o,id:i,routerKey:a="router"}=s();if(!e.get("handle")){const r=t.subscribe(a);r&&e.set("handle",r)}r("routerKey",(r,s)=>{const{routerKey:o="router"}=r,{routerKey:i="router"}=s;if(i!==o){const r=e.get("handle");r&&r();const n=t.subscribe(i);n&&e.set("handle",n)}n()});const d=t.get(a);if(d){const e=d.getOutlet(i);if(e){const{queryParams:t,params:r,type:n,isError:s,isExact:i}=e,a=o({queryParams:t,params:r,type:n,isError:s,isExact:i,router:d});if(a)return a}}return null}),lt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};var ut=le({injector:Re}).properties()(function({middleware:{injector:e},properties:t,children:r}){let n=t(),{routerKey:s="router",to:o,isOutlet:i=!0,target:a,params:d={},onClick:c}=n,l=lt(n,["routerKey","to","isOutlet","target","params","onClick"]);const u=e.get(s);let p,h=o;if(u){i&&(h=u.link(h,d));const e=e=>{c&&c(e),e.defaultPrevented||0!==e.button||e.metaKey||e.ctrlKey||a||(e.preventDefault(),void 0!==h&&u.setPath(h))};p=Object.assign({},l,{onclick:e,href:h})}else p=Object.assign({},l,{href:h});return G("a",p,r())}),pt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(r[n[s]]=e[n[s]])}return r};var ht=le({injector:Re,diffProperty:ve,cache:dt,invalidator:be}).properties()(function({middleware:{diffProperty:e,injector:t,cache:r,invalidator:n},properties:s,children:o}){const{to:i,routerKey:a="router",params:d}=s();let c=s(),{activeClasses:l,classes:u=[]}=c,p=pt(c,["activeClasses","classes"]);e("to",(e,s)=>{if(e.to!==s.to){const e=t.get(a),s=r.get("handle");if(s&&s.destroy(),e){const t=e.on("outlet",({outlet:e})=>{e.id===i&&n()});r.set("handle",t)}n()}});const h=t.get(a);if(h){if(!r.get("handle")){const e=h.on("outlet",({outlet:e})=>{e.id===i&&n()});r.set("handle",e)}const e=h.getOutlet(i),t=e&&function(e={},t={}){return Object.keys(e).every(r=>e[r]===t[r])}(d,e.params);u=Array.isArray(u)?u:[u],t&&(u=[...u,...l]),p=Object.assign({},p,{classes:u})}return X(ut,p,o())}),ft=r(31);let gt=0;const yt=function(e){return e},mt=le({store:rt()});function _t(e){return t=>t.id===e}const bt=yt(({state:e,payload:{label:t}})=>{const r=`${Date.now()}-${gt++}`;t=t.trim(),e.todos?e.todos.push({id:r,label:t}):e.todos=[{id:r,label:t}]}),vt=yt(({state:e,payload:{id:t}})=>{if(e.todos){const r=e.todos.findIndex(_t(t));-1!==r&&(e.todos[r].completed&&e.completedCount&&(e.completedCount=e.completedCount-1),e.todos.splice(r,1))}}),wt=yt(({state:e})=>{e.todos&&(e.todos=e.todos.filter(e=>!e.completed)),e.completedCount=0}),Ot=yt(({state:e,payload:{id:t}})=>{if(e.todos){const r=e.todos.findIndex(_t(t));if(-1!==r){const t=e.todos[r].completed;let n=e.completedCount||0;t?n--:n++,e.completedCount=n,e.todos[r].completed=!t}}}),At=yt(({state:e})=>{const t=e.completedCount||0;if(e.todos){const r=t!==e.todos.length;e.todos.forEach(e=>e.completed=r),e.completedCount=r?e.todos.length:0}}),jt=yt(({state:e,payload:t})=>{e.current=t.current}),xt=yt(({state:e})=>{e.current=void 0}),Pt=yt(({state:e,payload:{id:t,label:r}})=>{e.editingId=t,e.editingLabel=r}),kt=yt(({state:e})=>{e.editingId=void 0,e.editingLabel=void 0}),Nt=yt(({state:e})=>{if(e.todos){const t=e.todos.find(_t(e.editingId));e.editingLabel&&t&&(t.label=e.editingLabel)}}),It=yt(({state:e,payload:{label:t}})=>{e.editingLabel=t}),Et=at("add-todo",[xt,bt]),Ct=at("input-todo",[jt]),Rt=at("delete-todo",[vt]),Mt=at("toggle-todo",[Ot]),$t=at("toggle-all-todos",[At]),Lt=at("edit-mode-todo",[Pt]),Dt=at("read-mode-todo",[kt]),St=at("save-todo",[Nt,kt]),Tt=at("update-todo-input",[It]),Wt=at("clear-completed",[wt]);var Ht=mt(({middleware:e})=>{const{get:t,path:r,executor:n}=e.store,s=t(r("todos"))||[],o=t(r("current")),i=t(r("completedCount"))||0,a=t(r("editingId")),d=t(r("editingLabel")),c=({which:e})=>{13===e&&o&&n(Et)({label:o})},l=s.length-i;return re(ct,{id:"filter",renderer:e=>{const t=s.filter(t=>(function(e="all",t){switch(e){case"completed":return!!t.completed;case"active":return!t.completed;default:return!0}})(e.params.filter,t));return re("section",{classes:[ft.todoapp]},re("header",null,re("h1",{classes:[ft.title]},"todos"),re("input",{value:o,onkeyup:c,focus:!0,classes:[ft.newTodo],oninput:e=>{n(Ct)({current:e.target.value})},placeholder:"What needs to be done?"}),re("input",{checked:s&&i>0&&s.length===i,type:"checkbox",classes:[ft.toggleAll],onchange:()=>{n($t)({})}})),re("section",null,re("ul",{classes:[ft.todoList]},t.map(e=>re("li",{key:e.id,classes:[ft.todoItem,a===e.id&&ft.editing,Boolean(e.completed)&&ft.completed]},re("div",{classes:[ft.view]},re("input",{onchange:()=>{n(Mt)({id:e.id})},type:"checkbox",classes:[ft.toggle],checked:e.completed}),re("label",{ondblclick:()=>{n(Lt)({id:e.id,label:e.label})},classes:[ft.todoLabel]},e.label),re("button",{onclick:()=>{n(Rt)({id:e.id})},classes:[ft.destroy]})),a===e.id&&re("input",{classes:[ft.edit],onblur:()=>{n(Dt)({id:e.id})},onkeyup:t=>{13===t.which?n(St)({}):27===t.which?n(Dt)({id:e.id}):n(Tt)({label:t.target.value})},value:d,focus:()=>!0}))))),s.length&&re("footer",{classes:[ft.footer]},re("span",{classes:[ft.todoCountLabel]},re("strong",{classes:[ft.todoCount]},`${l} `),re("span",null,`${1===l?"item":"items"} left`)),re("ul",{classes:[ft.filters]},re("li",{classes:[ft.filter]},re(ht,{to:"filter",params:{filter:"all"},classes:[ft.filterLink],activeClasses:[ft.selected]},"all"),re(ht,{to:"filter",params:{filter:"active"},classes:[ft.filterLink],activeClasses:[ft.selected]},"active"),re(ht,{to:"filter",params:{filter:"completed"},classes:[ft.filterLink],activeClasses:[ft.selected]},"completed"))),i&&re("button",{onclick:()=>{n(Wt)({})},classes:[ft.clearCompleted]},"Clear Completed")))}})});const qt=new E;!function(e,t,r={}){const{key:n="router"}=r,s=Ce(r,["key"]);if(t.hasInjector(n))throw new Error("Router has already been defined");const o=new Ee(e,s);t.defineInjector(n,e=>(o.on("nav",()=>e()),()=>o))}([{path:"filter/{filter}",outlet:"filter",defaultParams:{filter:"all"},defaultRoute:!0}],qt),Ae(()=>re(Ht,null)).mount({registry:qt})},31:function(e,t,r){e.exports={" _key":"dojo-todo-mvc/App",todoapp:"App-m__todoapp__1-Cbr",main:"App-m__main__2QTbx",todoList:"App-m__todoList__2fOqu",title:"App-m__title__1zJ90",newTodo:"App-m__newTodo__3XCFp",toggleAll:"App-m__toggleAll__1VT1c",todoItem:"App-m__todoItem__1KusA",edit:"App-m__edit__1GiKq",editing:"App-m__editing__AvJxX",view:"App-m__view__3fb0K",toggle:"App-m__toggle__3FI7R",todoLabel:"App-m__todoLabel__2N8jw",completed:"App-m__completed__1QeE4",destroy:"App-m__destroy__3qyur",footer:"App-m__footer__1Ixgt",todoCountLabel:"App-m__todoCountLabel__2Y9bN",todoCount:"App-m__todoCount__1poUN",clearCompleted:"App-m__clearCompleted__3N6ho",filters:"App-m__filters__iqhn9",filter:"App-m__filter__3opuw",filterLink:"App-m__filterLink__1O7nN",selected:"App-m__selected__1kAqt"}}}]);
//# sourceMappingURL=main.e4b3e0feb9fffb8b2f35.bundle.js.map