/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonprealworld_app=window.dojoWebpackJsonprealworld_app||[]).push([["src/widgets/Profile"],{60:function(e,s,t){"use strict";t.r(s);var a=t(18),o=t(23),i=t(38),c=t(41),r=t(19),l=t(20),n=t(21),f=t(22),p=t(25);const b=Object(f.a)(({path:e})=>[Object(n.c)(e("profile","user","isLoading"),!0),Object(n.c)(e("profile","user","isLoaded"),!1),Object(n.c)(e("profile","feed","items"),void 0)]),d=Object(f.a)(({path:e,payload:{page:s,type:t}})=>[Object(n.c)(e("profile","feed","isLoading"),!0),Object(n.c)(e("profile","feed","isLoaded"),!1),Object(n.c)(e("profile","feed","category"),t),Object(n.c)(e("profile","feed","page"),s)]),g=Object(f.a)(async({get:e,path:s,payload:{username:t,following:a}})=>{const o=e(s("session","token")),i=await fetch(`${p.a}/profiles/${t}/follow`,{method:a?"delete":"post",headers:Object(f.b)(o)}),c=await i.json();return[Object(n.c)(s("profile"),c.profile)]}),j=Object(f.a)(async({get:e,path:s,payload:{username:t}})=>{const a=e(s("session","token")),o=await fetch(`${p.a}/profiles/${t}`,{headers:Object(f.b)(a)}),i=await o.json();return[Object(n.c)(s("profile","user","username"),i.profile.username),Object(n.c)(s("profile","user","image"),i.profile.image),Object(n.c)(s("profile","user","bio"),i.profile.bio),Object(n.c)(s("profile","user","following"),i.profile.following),Object(n.c)(s("profile","user","isLoading"),!1),Object(n.c)(s("profile","user","isLoaded"),!0)]}),u=Object(f.a)(async({get:e,path:s,payload:{type:t,username:a,page:o}})=>{const i=e(s("session","token")),c=10*o;let r=`${p.a}/articles?`;switch(t){case"favorites":r=`${r}favorited=${a}&`;break;case"user":r=`${r}author=${a}&`}const l=await fetch(`${r}limit=10&offset=${c}`,{headers:Object(f.b)(i)}),b=await l.json();return[Object(n.c)(s("profile","feed","items"),b.articles),Object(n.c)(s("profile","feed","total"),b.articlesCount),Object(n.c)(s("profile","feed","offset"),c),Object(n.c)(s("profile","feed","isLoading"),!1),Object(n.c)(s("profile","feed","isLoaded"),!0)]}),O=Object(l.b)("get-profile",[[b,d],[j,u]]),m=Object(l.b)("get-profile-feed",[d,u]),v=Object(l.b)("follow-user",[g]);var w=t(39);t.d(s,"Profile",function(){return y});const y=Object(a.a)({store:r.a}).properties()(function({middleware:{store:e},properties:s}){const{get:t,path:r,executor:l}=e,n=t(r("profile","user","isLoading")),f=t(r("profile","user","username")),p=t(r("profile","feed")),b=t(r("session","username")),{username:d,type:g}=s();if(d!==f&&!n)return l(O)({username:d,type:g,page:0}),null;g===p.category||p.isLoading||l(m)({username:d,type:g,page:0});const j=b===f,u=t(r("profile","feed","page"))||0,y=t(r("profile","feed","total"))||0,h=t(r("profile","user","image")),L=t(r("profile","user","bio")),$=t(r("profile","user","following"));return Object(a.g)("div",{classes:["profile-page"]},Object(a.g)("div",{classes:["user-info"]},Object(a.g)("div",{classes:["container"]},Object(a.g)("div",{classes:["row"]},Object(a.g)("div",{classes:["col-xs-12","col-md-10","offset-md-1"]},Object(a.g)("img",{src:h,classes:["user-img"]}),Object(a.g)("h4",null,d),Object(a.g)("p",null,L),j?Object(a.g)(o.a,{classes:["btn","btn-sm","btn-outline-secondary","action-btn"],to:"settings"},Object(a.g)("i",{classes:["ion-edit"]})," Edit Profile Settings"):Object(a.g)("button",{onclick:()=>{l(v)({following:$,username:d})},classes:["btn","btn-sm","action-btn",$?"btn-secondary":"btn-outline-secondary"]},Object(a.g)("i",{classes:["ion-plus-round"]}),$?" Unfollow ":" Follow ",d))))),Object(a.g)("div",{classes:["container"]},Object(a.g)("div",{classes:["row"]},Object(a.g)("div",{classes:["col-xs-12","col-md-10","offset-md-1"]},Object(a.g)("div",{classes:["articles-toggle"]},Object(a.g)("ul",{classes:["nav","nav-pills","outline-active"]},Object(a.g)("li",{classes:["nav-item"]},Object(a.g)(i.a,{to:"user",classes:["nav-link"],params:{username:d},activeClasses:["active"]},"My Articles")),Object(a.g)("li",{classes:["nav-item"]},Object(a.g)(i.a,{to:"favorites",classes:["nav-link"],params:{username:d},activeClasses:["active"]},"Favorited Articles")))),Object(a.g)("div",{classes:["profile-page"]},p.isLoading?Object(a.g)("div",{classes:["article-preview"]},"Loading... "):Object(a.g)(c.a,{type:g,articles:p.items||[]})),!p.isLoading&&Object(a.g)(w.a,{total:y,currentPage:u,fetchFeed:e=>{l(m)({type:g,username:d,page:e})}})))))});s.default=y}}]);
//# sourceMappingURL=Profile.8d3c7fdaa136e37fd248.bundle.js.map